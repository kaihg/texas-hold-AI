(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ri(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const re={},rs=[],ft=()=>{},Tc=()=>!1,Kn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ii=t=>t.startsWith("onUpdate:"),Me=Object.assign,ai=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Fc=Object.prototype.hasOwnProperty,te=(t,e)=>Fc.call(t,e),D=Array.isArray,is=t=>qs(t)==="[object Map]",Jn=t=>qs(t)==="[object Set]",la=t=>qs(t)==="[object Date]",W=t=>typeof t=="function",pe=t=>typeof t=="string",ht=t=>typeof t=="symbol",le=t=>t!==null&&typeof t=="object",co=t=>(le(t)||W(t))&&W(t.then)&&W(t.catch),uo=Object.prototype.toString,qs=t=>uo.call(t),Mc=t=>qs(t).slice(8,-1),fo=t=>qs(t)==="[object Object]",oi=t=>pe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ts=ri(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gn=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},kc=/-(\w)/g,Ot=Gn(t=>t.replace(kc,(e,s)=>s?s.toUpperCase():"")),Bc=/\B([A-Z])/g,qt=Gn(t=>t.replace(Bc,"-$1").toLowerCase()),ho=Gn(t=>t.charAt(0).toUpperCase()+t.slice(1)),mr=Gn(t=>t?`on${ho(t)}`:""),Et=(t,e)=>!Object.is(t,e),bn=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},po=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},On=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ca;const qn=()=>ca||(ca=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function li(t){if(D(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=pe(n)?Uc(n):li(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(pe(t)||le(t))return t}const Nc=/;(?![^(]*\))/g,Lc=/:([^]+)/,Dc=/\/\*[^]*?\*\//g;function Uc(t){const e={};return t.replace(Dc,"").split(Nc).forEach(s=>{if(s){const n=s.split(Lc);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ye(t){let e="";if(pe(t))e=t;else if(D(t))for(let s=0;s<t.length;s++){const n=Ye(t[s]);n&&(e+=n+" ")}else if(le(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const jc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hc=ri(jc);function mo(t){return!!t||t===""}function Wc(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=Xn(t[n],e[n]);return s}function Xn(t,e){if(t===e)return!0;let s=la(t),n=la(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=ht(t),n=ht(e),s||n)return t===e;if(s=D(t),n=D(e),s||n)return s&&n?Wc(t,e):!1;if(s=le(t),n=le(e),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const a in t){const o=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Xn(t[a],e[a]))return!1}}return String(t)===String(e)}function Vc(t,e){return t.findIndex(s=>Xn(s,e))}const go=t=>!!(t&&t.__v_isRef===!0),we=t=>pe(t)?t:t==null?"":D(t)||le(t)&&(t.toString===uo||!W(t.toString))?go(t)?we(t.value):JSON.stringify(t,_o,2):String(t),_o=(t,e)=>go(e)?_o(t,e.value):is(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[gr(n,i)+" =>"]=r,s),{})}:Jn(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>gr(s))}:ht(e)?gr(e):le(e)&&!D(e)&&!fo(e)?String(e):e,gr=(t,e="")=>{var s;return ht(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ve;class Kc{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ve,!e&&Ve&&(this.index=(Ve.scopes||(Ve.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Ve;try{return Ve=this,e()}finally{Ve=s}}}on(){Ve=this}off(){Ve=this.parent}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Jc(){return Ve}let oe;const _r=new WeakSet;class yo{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ve&&Ve.active&&Ve.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_r.has(this)&&(_r.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ua(this),vo(this);const e=oe,s=Ze;oe=this,Ze=!0;try{return this.fn()}finally{xo(this),oe=e,Ze=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)fi(e);this.deps=this.depsTail=void 0,ua(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_r.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mr(this)&&this.run()}get dirty(){return Mr(this)}}let bo=0,Fs,Ms;function wo(t,e=!1){if(t.flags|=8,e){t.next=Ms,Ms=t;return}t.next=Fs,Fs=t}function ci(){bo++}function ui(){if(--bo>0)return;if(Ms){let e=Ms;for(Ms=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Fs;){let e=Fs;for(Fs=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function vo(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xo(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),fi(n),Gc(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function Mr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(So(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function So(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===js))return;t.globalVersion=js;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Mr(t)){t.flags&=-3;return}const s=oe,n=Ze;oe=t,Ze=!0;try{vo(t);const r=t.fn(t._value);(e.version===0||Et(r,t._value))&&(t._value=r,e.version++)}catch(r){throw e.version++,r}finally{oe=s,Ze=n,xo(t),t.flags&=-3}}function fi(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)fi(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Gc(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Ze=!0;const Ao=[];function $t(){Ao.push(Ze),Ze=!1}function Tt(){const t=Ao.pop();Ze=t===void 0?!0:t}function ua(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=oe;oe=void 0;try{e()}finally{oe=s}}}let js=0;class qc{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class di{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!oe||!Ze||oe===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==oe)s=this.activeLink=new qc(oe,this),oe.deps?(s.prevDep=oe.depsTail,oe.depsTail.nextDep=s,oe.depsTail=s):oe.deps=oe.depsTail=s,Co(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=oe.depsTail,s.nextDep=void 0,oe.depsTail.nextDep=s,oe.depsTail=s,oe.deps===s&&(oe.deps=n)}return s}trigger(e){this.version++,js++,this.notify(e)}notify(e){ci();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{ui()}}}function Co(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Co(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const kr=new WeakMap,Kt=Symbol(""),Br=Symbol(""),Hs=Symbol("");function Pe(t,e,s){if(Ze&&oe){let n=kr.get(t);n||kr.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new di),r.map=n,r.key=s),r.track()}}function bt(t,e,s,n,r,i){const a=kr.get(t);if(!a){js++;return}const o=l=>{l&&l.trigger()};if(ci(),e==="clear")a.forEach(o);else{const l=D(t),u=l&&oi(s);if(l&&s==="length"){const d=Number(n);a.forEach((c,g)=>{(g==="length"||g===Hs||!ht(g)&&g>=d)&&o(c)})}else switch((s!==void 0||a.has(void 0))&&o(a.get(s)),u&&o(a.get(Hs)),e){case"add":l?u&&o(a.get("length")):(o(a.get(Kt)),is(t)&&o(a.get(Br)));break;case"delete":l||(o(a.get(Kt)),is(t)&&o(a.get(Br)));break;case"set":is(t)&&o(a.get(Kt));break}}ui()}function Xt(t){const e=ee(t);return e===t?e:(Pe(e,"iterate",Hs),qe(t)?e:e.map(Re))}function Qn(t){return Pe(t=ee(t),"iterate",Hs),t}const Xc={__proto__:null,[Symbol.iterator](){return yr(this,Symbol.iterator,Re)},concat(...t){return Xt(this).concat(...t.map(e=>D(e)?Xt(e):e))},entries(){return yr(this,"entries",t=>(t[1]=Re(t[1]),t))},every(t,e){return mt(this,"every",t,e,void 0,arguments)},filter(t,e){return mt(this,"filter",t,e,s=>s.map(Re),arguments)},find(t,e){return mt(this,"find",t,e,Re,arguments)},findIndex(t,e){return mt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return mt(this,"findLast",t,e,Re,arguments)},findLastIndex(t,e){return mt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return mt(this,"forEach",t,e,void 0,arguments)},includes(...t){return br(this,"includes",t)},indexOf(...t){return br(this,"indexOf",t)},join(t){return Xt(this).join(t)},lastIndexOf(...t){return br(this,"lastIndexOf",t)},map(t,e){return mt(this,"map",t,e,void 0,arguments)},pop(){return Ss(this,"pop")},push(...t){return Ss(this,"push",t)},reduce(t,...e){return fa(this,"reduce",t,e)},reduceRight(t,...e){return fa(this,"reduceRight",t,e)},shift(){return Ss(this,"shift")},some(t,e){return mt(this,"some",t,e,void 0,arguments)},splice(...t){return Ss(this,"splice",t)},toReversed(){return Xt(this).toReversed()},toSorted(t){return Xt(this).toSorted(t)},toSpliced(...t){return Xt(this).toSpliced(...t)},unshift(...t){return Ss(this,"unshift",t)},values(){return yr(this,"values",Re)}};function yr(t,e,s){const n=Qn(t),r=n[e]();return n!==t&&!qe(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=s(i.value)),i}),r}const Qc=Array.prototype;function mt(t,e,s,n,r,i){const a=Qn(t),o=a!==t&&!qe(t),l=a[e];if(l!==Qc[e]){const c=l.apply(t,i);return o?Re(c):c}let u=s;a!==t&&(o?u=function(c,g){return s.call(this,Re(c),g,t)}:s.length>2&&(u=function(c,g){return s.call(this,c,g,t)}));const d=l.call(a,u,n);return o&&r?r(d):d}function fa(t,e,s,n){const r=Qn(t);let i=s;return r!==t&&(qe(t)?s.length>3&&(i=function(a,o,l){return s.call(this,a,o,l,t)}):i=function(a,o,l){return s.call(this,a,Re(o),l,t)}),r[e](i,...n)}function br(t,e,s){const n=ee(t);Pe(n,"iterate",Hs);const r=n[e](...s);return(r===-1||r===!1)&&gi(s[0])?(s[0]=ee(s[0]),n[e](...s)):r}function Ss(t,e,s=[]){$t(),ci();const n=ee(t)[e].apply(t,s);return ui(),Tt(),n}const Yc=ri("__proto__,__v_isRef,__isVue"),Po=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ht));function zc(t){ht(t)||(t=String(t));const e=ee(this);return Pe(e,"has",t),e.hasOwnProperty(t)}class Ro{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?lu:$o:i?Oo:Io).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=D(e);if(!r){let l;if(a&&(l=Xc[s]))return l;if(s==="hasOwnProperty")return zc}const o=Reflect.get(e,s,Ie(e)?e:n);return(ht(s)?Po.has(s):Yc(s))||(r||Pe(e,"get",s),i)?o:Ie(o)?a&&oi(s)?o:o.value:le(o)?r?To(o):pi(o):o}}class Eo extends Ro{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];if(!this._isShallow){const l=Jt(i);if(!qe(n)&&!Jt(n)&&(i=ee(i),n=ee(n)),!D(e)&&Ie(i)&&!Ie(n))return l?!1:(i.value=n,!0)}const a=D(e)&&oi(s)?Number(s)<e.length:te(e,s),o=Reflect.set(e,s,n,Ie(e)?e:r);return e===ee(r)&&(a?Et(n,i)&&bt(e,"set",s,n):bt(e,"add",s,n)),o}deleteProperty(e,s){const n=te(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&bt(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!ht(s)||!Po.has(s))&&Pe(e,"has",s),n}ownKeys(e){return Pe(e,"iterate",D(e)?"length":Kt),Reflect.ownKeys(e)}}class Zc extends Ro{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const eu=new Eo,tu=new Zc,su=new Eo(!0);const Nr=t=>t,an=t=>Reflect.getPrototypeOf(t);function nu(t,e,s){return function(...n){const r=this.__v_raw,i=ee(r),a=is(i),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=r[t](...n),d=s?Nr:e?Lr:Re;return!e&&Pe(i,"iterate",l?Br:Kt),{next(){const{value:c,done:g}=u.next();return g?{value:c,done:g}:{value:o?[d(c[0]),d(c[1])]:d(c),done:g}},[Symbol.iterator](){return this}}}}function on(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ru(t,e){const s={get(r){const i=this.__v_raw,a=ee(i),o=ee(r);t||(Et(r,o)&&Pe(a,"get",r),Pe(a,"get",o));const{has:l}=an(a),u=e?Nr:t?Lr:Re;if(l.call(a,r))return u(i.get(r));if(l.call(a,o))return u(i.get(o));i!==a&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Pe(ee(r),"iterate",Kt),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,a=ee(i),o=ee(r);return t||(Et(r,o)&&Pe(a,"has",r),Pe(a,"has",o)),r===o?i.has(r):i.has(r)||i.has(o)},forEach(r,i){const a=this,o=a.__v_raw,l=ee(o),u=e?Nr:t?Lr:Re;return!t&&Pe(l,"iterate",Kt),o.forEach((d,c)=>r.call(i,u(d),u(c),a))}};return Me(s,t?{add:on("add"),set:on("set"),delete:on("delete"),clear:on("clear")}:{add(r){!e&&!qe(r)&&!Jt(r)&&(r=ee(r));const i=ee(this);return an(i).has.call(i,r)||(i.add(r),bt(i,"add",r,r)),this},set(r,i){!e&&!qe(i)&&!Jt(i)&&(i=ee(i));const a=ee(this),{has:o,get:l}=an(a);let u=o.call(a,r);u||(r=ee(r),u=o.call(a,r));const d=l.call(a,r);return a.set(r,i),u?Et(i,d)&&bt(a,"set",r,i):bt(a,"add",r,i),this},delete(r){const i=ee(this),{has:a,get:o}=an(i);let l=a.call(i,r);l||(r=ee(r),l=a.call(i,r)),o&&o.call(i,r);const u=i.delete(r);return l&&bt(i,"delete",r,void 0),u},clear(){const r=ee(this),i=r.size!==0,a=r.clear();return i&&bt(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=nu(r,t,e)}),s}function hi(t,e){const s=ru(t,e);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(te(s,r)&&r in n?s:n,r,i)}const iu={get:hi(!1,!1)},au={get:hi(!1,!0)},ou={get:hi(!0,!1)};const Io=new WeakMap,Oo=new WeakMap,$o=new WeakMap,lu=new WeakMap;function cu(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uu(t){return t.__v_skip||!Object.isExtensible(t)?0:cu(Mc(t))}function pi(t){return Jt(t)?t:mi(t,!1,eu,iu,Io)}function fu(t){return mi(t,!1,su,au,Oo)}function To(t){return mi(t,!0,tu,ou,$o)}function mi(t,e,s,n,r){if(!le(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const a=uu(t);if(a===0)return t;const o=new Proxy(t,a===2?n:s);return r.set(t,o),o}function as(t){return Jt(t)?as(t.__v_raw):!!(t&&t.__v_isReactive)}function Jt(t){return!!(t&&t.__v_isReadonly)}function qe(t){return!!(t&&t.__v_isShallow)}function gi(t){return t?!!t.__v_raw:!1}function ee(t){const e=t&&t.__v_raw;return e?ee(e):t}function du(t){return!te(t,"__v_skip")&&Object.isExtensible(t)&&po(t,"__v_skip",!0),t}const Re=t=>le(t)?pi(t):t,Lr=t=>le(t)?To(t):t;function Ie(t){return t?t.__v_isRef===!0:!1}function Ee(t){return hu(t,!1)}function hu(t,e){return Ie(t)?t:new pu(t,e)}class pu{constructor(e,s){this.dep=new di,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:ee(e),this._value=s?e:Re(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||qe(e)||Jt(e);e=n?e:ee(e),Et(e,s)&&(this._rawValue=e,this._value=n?e:Re(e),this.dep.trigger())}}function mu(t){return Ie(t)?t.value:t}const gu={get:(t,e,s)=>e==="__v_raw"?t:mu(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return Ie(r)&&!Ie(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function Fo(t){return as(t)?t:new Proxy(t,gu)}class _u{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new di(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=js-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&oe!==this)return wo(this,!0),!0}get value(){const e=this.dep.track();return So(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function yu(t,e,s=!1){let n,r;return W(t)?n=t:(n=t.get,r=t.set),new _u(n,r,s)}const ln={},$n=new WeakMap;let Ut;function bu(t,e=!1,s=Ut){if(s){let n=$n.get(s);n||$n.set(s,n=[]),n.push(t)}}function wu(t,e,s=re){const{immediate:n,deep:r,once:i,scheduler:a,augmentJob:o,call:l}=s,u=A=>r?A:qe(A)||r===!1||r===0?wt(A,1):wt(A);let d,c,g,p,b=!1,m=!1;if(Ie(t)?(c=()=>t.value,b=qe(t)):as(t)?(c=()=>u(t),b=!0):D(t)?(m=!0,b=t.some(A=>as(A)||qe(A)),c=()=>t.map(A=>{if(Ie(A))return A.value;if(as(A))return u(A);if(W(A))return l?l(A,2):A()})):W(t)?e?c=l?()=>l(t,2):t:c=()=>{if(g){$t();try{g()}finally{Tt()}}const A=Ut;Ut=d;try{return l?l(t,3,[p]):t(p)}finally{Ut=A}}:c=ft,e&&r){const A=c,j=r===!0?1/0:r;c=()=>wt(A(),j)}const v=Jc(),F=()=>{d.stop(),v&&v.active&&ai(v.effects,d)};if(i&&e){const A=e;e=(...j)=>{A(...j),F()}}let C=m?new Array(t.length).fill(ln):ln;const M=A=>{if(!(!(d.flags&1)||!d.dirty&&!A))if(e){const j=d.run();if(r||b||(m?j.some((H,P)=>Et(H,C[P])):Et(j,C))){g&&g();const H=Ut;Ut=d;try{const P=[j,C===ln?void 0:m&&C[0]===ln?[]:C,p];l?l(e,3,P):e(...P),C=j}finally{Ut=H}}}else d.run()};return o&&o(M),d=new yo(c),d.scheduler=a?()=>a(M,!1):M,p=A=>bu(A,!1,d),g=d.onStop=()=>{const A=$n.get(d);if(A){if(l)l(A,4);else for(const j of A)j();$n.delete(d)}},e?n?M(!0):C=d.run():a?a(M.bind(null,!0),!0):d.run(),F.pause=d.pause.bind(d),F.resume=d.resume.bind(d),F.stop=F,F}function wt(t,e=1/0,s){if(e<=0||!le(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,Ie(t))wt(t.value,e,s);else if(D(t))for(let n=0;n<t.length;n++)wt(t[n],e,s);else if(Jn(t)||is(t))t.forEach(n=>{wt(n,e,s)});else if(fo(t)){for(const n in t)wt(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&wt(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xs(t,e,s,n){try{return n?t(...n):t()}catch(r){Yn(r,e,s)}}function pt(t,e,s,n){if(W(t)){const r=Xs(t,e,s,n);return r&&co(r)&&r.catch(i=>{Yn(i,e,s)}),r}if(D(t)){const r=[];for(let i=0;i<t.length;i++)r.push(pt(t[i],e,s,n));return r}}function Yn(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||re;if(e){let o=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;o;){const d=o.ec;if(d){for(let c=0;c<d.length;c++)if(d[c](t,l,u)===!1)return}o=o.parent}if(i){$t(),Xs(i,null,10,[t,l,u]),Tt();return}}vu(t,s,r,n,a)}function vu(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const Te=[];let at=-1;const os=[];let Ct=null,es=0;const Mo=Promise.resolve();let Tn=null;function ko(t){const e=Tn||Mo;return t?e.then(this?t.bind(this):t):e}function xu(t){let e=at+1,s=Te.length;for(;e<s;){const n=e+s>>>1,r=Te[n],i=Ws(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function _i(t){if(!(t.flags&1)){const e=Ws(t),s=Te[Te.length-1];!s||!(t.flags&2)&&e>=Ws(s)?Te.push(t):Te.splice(xu(e),0,t),t.flags|=1,Bo()}}function Bo(){Tn||(Tn=Mo.then(Lo))}function Su(t){D(t)?os.push(...t):Ct&&t.id===-1?Ct.splice(es+1,0,t):t.flags&1||(os.push(t),t.flags|=1),Bo()}function da(t,e,s=at+1){for(;s<Te.length;s++){const n=Te[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Te.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function No(t){if(os.length){const e=[...new Set(os)].sort((s,n)=>Ws(s)-Ws(n));if(os.length=0,Ct){Ct.push(...e);return}for(Ct=e,es=0;es<Ct.length;es++){const s=Ct[es];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ct=null,es=0}}const Ws=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Lo(t){try{for(at=0;at<Te.length;at++){const e=Te[at];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Xs(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;at<Te.length;at++){const e=Te[at];e&&(e.flags&=-2)}at=-1,Te.length=0,No(),Tn=null,(Te.length||os.length)&&Lo()}}let Je=null,Do=null;function Fn(t){const e=Je;return Je=t,Do=t&&t.type.__scopeId||null,e}function Au(t,e=Je,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&va(-1);const i=Fn(e);let a;try{a=t(...r)}finally{Fn(i),n._d&&va(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Pt(t,e){if(Je===null)return t;const s=tr(Je),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,a,o,l=re]=e[r];i&&(W(i)&&(i={mounted:i,updated:i}),i.deep&&wt(a),n.push({dir:i,instance:s,value:a,oldValue:void 0,arg:o,modifiers:l}))}return t}function Nt(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&($t(),pt(l,s,8,[t.el,o,t,e]),Tt())}}const Cu=Symbol("_vte"),Pu=t=>t.__isTeleport;function yi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,yi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Uo(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Mn(t,e,s,n,r=!1){if(D(t)){t.forEach((b,m)=>Mn(b,e&&(D(e)?e[m]:e),s,n,r));return}if(ks(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Mn(t,e,s,n.component.subTree);return}const i=n.shapeFlag&4?tr(n.component):n.el,a=r?null:i,{i:o,r:l}=t,u=e&&e.r,d=o.refs===re?o.refs={}:o.refs,c=o.setupState,g=ee(c),p=c===re?()=>!1:b=>te(g,b);if(u!=null&&u!==l&&(pe(u)?(d[u]=null,p(u)&&(c[u]=null)):Ie(u)&&(u.value=null)),W(l))Xs(l,o,12,[a,d]);else{const b=pe(l),m=Ie(l);if(b||m){const v=()=>{if(t.f){const F=b?p(l)?c[l]:d[l]:l.value;r?D(F)&&ai(F,i):D(F)?F.includes(i)||F.push(i):b?(d[l]=[i],p(l)&&(c[l]=d[l])):(l.value=[i],t.k&&(d[t.k]=l.value))}else b?(d[l]=a,p(l)&&(c[l]=a)):m&&(l.value=a,t.k&&(d[t.k]=a))};a?(v.id=-1,He(v,s)):v()}}}qn().requestIdleCallback;qn().cancelIdleCallback;const ks=t=>!!t.type.__asyncLoader,jo=t=>t.type.__isKeepAlive;function Ru(t,e){Ho(t,"a",e)}function Eu(t,e){Ho(t,"da",e)}function Ho(t,e,s=Fe){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(zn(e,n,s),s){let r=s.parent;for(;r&&r.parent;)jo(r.parent.vnode)&&Iu(n,e,s,r),r=r.parent}}function Iu(t,e,s,n){const r=zn(e,t,n,!0);Vo(()=>{ai(n[e],r)},s)}function zn(t,e,s=Fe,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...a)=>{$t();const o=Qs(s),l=pt(e,s,t,a);return o(),Tt(),l});return n?r.unshift(i):r.push(i),i}}const vt=t=>(e,s=Fe)=>{(!Ks||t==="sp")&&zn(t,(...n)=>e(...n),s)},Ou=vt("bm"),Wo=vt("m"),$u=vt("bu"),Tu=vt("u"),Fu=vt("bum"),Vo=vt("um"),Mu=vt("sp"),ku=vt("rtg"),Bu=vt("rtc");function Nu(t,e=Fe){zn("ec",t,e)}const Lu=Symbol.for("v-ndc");function Ne(t,e,s,n){let r;const i=s,a=D(t);if(a||pe(t)){const o=a&&as(t);let l=!1;o&&(l=!qe(t),t=Qn(t)),r=new Array(t.length);for(let u=0,d=t.length;u<d;u++)r[u]=e(l?Re(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,i)}else if(le(t))if(t[Symbol.iterator])r=Array.from(t,(o,l)=>e(o,l,void 0,i));else{const o=Object.keys(t);r=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const d=o[l];r[l]=e(t[d],d,l,i)}}else r=[];return r}const Dr=t=>t?hl(t)?tr(t):Dr(t.parent):null,Bs=Me(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Dr(t.parent),$root:t=>Dr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Jo(t),$forceUpdate:t=>t.f||(t.f=()=>{_i(t.update)}),$nextTick:t=>t.n||(t.n=ko.bind(t.proxy)),$watch:t=>of.bind(t)}),wr=(t,e)=>t!==re&&!t.__isScriptSetup&&te(t,e),Du={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:a,type:o,appContext:l}=t;let u;if(e[0]!=="$"){const p=a[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(wr(n,e))return a[e]=1,n[e];if(r!==re&&te(r,e))return a[e]=2,r[e];if((u=t.propsOptions[0])&&te(u,e))return a[e]=3,i[e];if(s!==re&&te(s,e))return a[e]=4,s[e];Ur&&(a[e]=0)}}const d=Bs[e];let c,g;if(d)return e==="$attrs"&&Pe(t.attrs,"get",""),d(t);if((c=o.__cssModules)&&(c=c[e]))return c;if(s!==re&&te(s,e))return a[e]=4,s[e];if(g=l.config.globalProperties,te(g,e))return g[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return wr(r,e)?(r[e]=s,!0):n!==re&&te(n,e)?(n[e]=s,!0):te(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,propsOptions:i}},a){let o;return!!s[a]||t!==re&&te(t,a)||wr(e,a)||(o=i[0])&&te(o,a)||te(n,a)||te(Bs,a)||te(r.config.globalProperties,a)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:te(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function ha(t){return D(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Ur=!0;function Uu(t){const e=Jo(t),s=t.proxy,n=t.ctx;Ur=!1,e.beforeCreate&&pa(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:a,watch:o,provide:l,inject:u,created:d,beforeMount:c,mounted:g,beforeUpdate:p,updated:b,activated:m,deactivated:v,beforeDestroy:F,beforeUnmount:C,destroyed:M,unmounted:A,render:j,renderTracked:H,renderTriggered:P,errorCaptured:T,serverPrefetch:Z,expose:X,inheritAttrs:q,components:J,directives:he,filters:_e}=e;if(u&&ju(u,n,null),a)for(const ce in a){const ie=a[ce];W(ie)&&(n[ce]=ie.bind(s))}if(r){const ce=r.call(s,s);le(ce)&&(t.data=pi(ce))}if(Ur=!0,i)for(const ce in i){const ie=i[ce],kt=W(ie)?ie.bind(s,s):W(ie.get)?ie.get.bind(s,s):ft,nn=!W(ie)&&W(ie.set)?ie.set.bind(s):ft,Bt=vi({get:kt,set:nn});Object.defineProperty(n,ce,{enumerable:!0,configurable:!0,get:()=>Bt.value,set:et=>Bt.value=et})}if(o)for(const ce in o)Ko(o[ce],n,s,ce);if(l){const ce=W(l)?l.call(s):l;Reflect.ownKeys(ce).forEach(ie=>{Gu(ie,ce[ie])})}d&&pa(d,t,"c");function Oe(ce,ie){D(ie)?ie.forEach(kt=>ce(kt.bind(s))):ie&&ce(ie.bind(s))}if(Oe(Ou,c),Oe(Wo,g),Oe($u,p),Oe(Tu,b),Oe(Ru,m),Oe(Eu,v),Oe(Nu,T),Oe(Bu,H),Oe(ku,P),Oe(Fu,C),Oe(Vo,A),Oe(Mu,Z),D(X))if(X.length){const ce=t.exposed||(t.exposed={});X.forEach(ie=>{Object.defineProperty(ce,ie,{get:()=>s[ie],set:kt=>s[ie]=kt})})}else t.exposed||(t.exposed={});j&&t.render===ft&&(t.render=j),q!=null&&(t.inheritAttrs=q),J&&(t.components=J),he&&(t.directives=he),Z&&Uo(t)}function ju(t,e,s=ft){D(t)&&(t=jr(t));for(const n in t){const r=t[n];let i;le(r)?"default"in r?i=wn(r.from||n,r.default,!0):i=wn(r.from||n):i=wn(r),Ie(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function pa(t,e,s){pt(D(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function Ko(t,e,s,n){let r=n.includes(".")?al(s,n):()=>s[n];if(pe(t)){const i=e[t];W(i)&&cs(r,i)}else if(W(t))cs(r,t.bind(s));else if(le(t))if(D(t))t.forEach(i=>Ko(i,e,s,n));else{const i=W(t.handler)?t.handler.bind(s):e[t.handler];W(i)&&cs(r,i,t)}}function Jo(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,o=i.get(e);let l;return o?l=o:!r.length&&!s&&!n?l=e:(l={},r.length&&r.forEach(u=>kn(l,u,a,!0)),kn(l,e,a)),le(e)&&i.set(e,l),l}function kn(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&kn(t,i,s,!0),r&&r.forEach(a=>kn(t,a,s,!0));for(const a in e)if(!(n&&a==="expose")){const o=Hu[a]||s&&s[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Hu={data:ma,props:ga,emits:ga,methods:Cs,computed:Cs,beforeCreate:$e,created:$e,beforeMount:$e,mounted:$e,beforeUpdate:$e,updated:$e,beforeDestroy:$e,beforeUnmount:$e,destroyed:$e,unmounted:$e,activated:$e,deactivated:$e,errorCaptured:$e,serverPrefetch:$e,components:Cs,directives:Cs,watch:Vu,provide:ma,inject:Wu};function ma(t,e){return e?t?function(){return Me(W(t)?t.call(this,this):t,W(e)?e.call(this,this):e)}:e:t}function Wu(t,e){return Cs(jr(t),jr(e))}function jr(t){if(D(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function $e(t,e){return t?[...new Set([].concat(t,e))]:e}function Cs(t,e){return t?Me(Object.create(null),t,e):e}function ga(t,e){return t?D(t)&&D(e)?[...new Set([...t,...e])]:Me(Object.create(null),ha(t),ha(e??{})):e}function Vu(t,e){if(!t)return e;if(!e)return t;const s=Me(Object.create(null),t);for(const n in e)s[n]=$e(t[n],e[n]);return s}function Go(){return{app:null,config:{isNativeTag:Tc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ku=0;function Ju(t,e){return function(n,r=null){W(n)||(n=Me({},n)),r!=null&&!le(r)&&(r=null);const i=Go(),a=new WeakSet,o=[];let l=!1;const u=i.app={_uid:Ku++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Ef,get config(){return i.config},set config(d){},use(d,...c){return a.has(d)||(d&&W(d.install)?(a.add(d),d.install(u,...c)):W(d)&&(a.add(d),d(u,...c))),u},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),u},component(d,c){return c?(i.components[d]=c,u):i.components[d]},directive(d,c){return c?(i.directives[d]=c,u):i.directives[d]},mount(d,c,g){if(!l){const p=u._ceVNode||dt(n,r);return p.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(p,d,g),l=!0,u._container=d,d.__vue_app__=u,tr(p.component)}},onUnmount(d){o.push(d)},unmount(){l&&(pt(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,c){return i.provides[d]=c,u},runWithContext(d){const c=ls;ls=u;try{return d()}finally{ls=c}}};return u}}let ls=null;function Gu(t,e){if(Fe){let s=Fe.provides;const n=Fe.parent&&Fe.parent.provides;n===s&&(s=Fe.provides=Object.create(n)),s[t]=e}}function wn(t,e,s=!1){const n=Fe||Je;if(n||ls){const r=ls?ls._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&W(e)?e.call(n&&n.proxy):e}}const qo={},Xo=()=>Object.create(qo),Qo=t=>Object.getPrototypeOf(t)===qo;function qu(t,e,s,n=!1){const r={},i=Xo();t.propsDefaults=Object.create(null),Yo(t,e,r,i);for(const a in t.propsOptions[0])a in r||(r[a]=void 0);s?t.props=n?r:fu(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Xu(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:a}}=t,o=ee(r),[l]=t.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let c=0;c<d.length;c++){let g=d[c];if(Zn(t.emitsOptions,g))continue;const p=e[g];if(l)if(te(i,g))p!==i[g]&&(i[g]=p,u=!0);else{const b=Ot(g);r[b]=Hr(l,o,b,p,t,!1)}else p!==i[g]&&(i[g]=p,u=!0)}}}else{Yo(t,e,r,i)&&(u=!0);let d;for(const c in o)(!e||!te(e,c)&&((d=qt(c))===c||!te(e,d)))&&(l?s&&(s[c]!==void 0||s[d]!==void 0)&&(r[c]=Hr(l,o,c,void 0,t,!0)):delete r[c]);if(i!==o)for(const c in i)(!e||!te(e,c))&&(delete i[c],u=!0)}u&&bt(t.attrs,"set","")}function Yo(t,e,s,n){const[r,i]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Ts(l))continue;const u=e[l];let d;r&&te(r,d=Ot(l))?!i||!i.includes(d)?s[d]=u:(o||(o={}))[d]=u:Zn(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(i){const l=ee(s),u=o||re;for(let d=0;d<i.length;d++){const c=i[d];s[c]=Hr(r,l,c,u[c],t,!te(u,c))}}return a}function Hr(t,e,s,n,r,i){const a=t[s];if(a!=null){const o=te(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&W(l)){const{propsDefaults:u}=r;if(s in u)n=u[s];else{const d=Qs(r);n=u[s]=l.call(null,e),d()}}else n=l;r.ce&&r.ce._setProp(s,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===qt(s))&&(n=!0))}return n}const Qu=new WeakMap;function zo(t,e,s=!1){const n=s?Qu:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,a={},o=[];let l=!1;if(!W(t)){const d=c=>{l=!0;const[g,p]=zo(c,e,!0);Me(a,g),p&&o.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!l)return le(t)&&n.set(t,rs),rs;if(D(i))for(let d=0;d<i.length;d++){const c=Ot(i[d]);_a(c)&&(a[c]=re)}else if(i)for(const d in i){const c=Ot(d);if(_a(c)){const g=i[d],p=a[c]=D(g)||W(g)?{type:g}:Me({},g),b=p.type;let m=!1,v=!0;if(D(b))for(let F=0;F<b.length;++F){const C=b[F],M=W(C)&&C.name;if(M==="Boolean"){m=!0;break}else M==="String"&&(v=!1)}else m=W(b)&&b.name==="Boolean";p[0]=m,p[1]=v,(m||te(p,"default"))&&o.push(c)}}const u=[a,o];return le(t)&&n.set(t,u),u}function _a(t){return t[0]!=="$"&&!Ts(t)}const Zo=t=>t[0]==="_"||t==="$stable",bi=t=>D(t)?t.map(ct):[ct(t)],Yu=(t,e,s)=>{if(e._n)return e;const n=Au((...r)=>bi(e(...r)),s);return n._c=!1,n},el=(t,e,s)=>{const n=t._ctx;for(const r in t){if(Zo(r))continue;const i=t[r];if(W(i))e[r]=Yu(r,i,n);else if(i!=null){const a=bi(i);e[r]=()=>a}}},tl=(t,e)=>{const s=bi(e);t.slots.default=()=>s},sl=(t,e,s)=>{for(const n in e)(s||n!=="_")&&(t[n]=e[n])},zu=(t,e,s)=>{const n=t.slots=Xo();if(t.vnode.shapeFlag&32){const r=e._;r?(sl(n,e,s),s&&po(n,"_",r,!0)):el(e,n)}else e&&tl(t,e)},Zu=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,a=re;if(n.shapeFlag&32){const o=e._;o?s&&o===1?i=!1:sl(r,e,s):(i=!e.$stable,el(e,r)),a=e}else e&&(tl(t,e),a={default:1});if(i)for(const o in r)!Zo(o)&&a[o]==null&&delete r[o]},He=pf;function ef(t){return tf(t)}function tf(t,e){const s=qn();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:a,createText:o,createComment:l,setText:u,setElementText:d,parentNode:c,nextSibling:g,setScopeId:p=ft,insertStaticContent:b}=t,m=(f,h,_,x=null,y=null,w=null,O=void 0,I=null,R=!!h.dynamicChildren)=>{if(f===h)return;f&&!As(f,h)&&(x=rn(f),et(f,y,w,!0),f=null),h.patchFlag===-2&&(R=!1,h.dynamicChildren=null);const{type:S,ref:N,shapeFlag:$}=h;switch(S){case er:v(f,h,_,x);break;case Gt:F(f,h,_,x);break;case vn:f==null&&C(h,_,x,O);break;case fe:J(f,h,_,x,y,w,O,I,R);break;default:$&1?j(f,h,_,x,y,w,O,I,R):$&6?he(f,h,_,x,y,w,O,I,R):($&64||$&128)&&S.process(f,h,_,x,y,w,O,I,R,vs)}N!=null&&y&&Mn(N,f&&f.ref,w,h||f,!h)},v=(f,h,_,x)=>{if(f==null)n(h.el=o(h.children),_,x);else{const y=h.el=f.el;h.children!==f.children&&u(y,h.children)}},F=(f,h,_,x)=>{f==null?n(h.el=l(h.children||""),_,x):h.el=f.el},C=(f,h,_,x)=>{[f.el,f.anchor]=b(f.children,h,_,x,f.el,f.anchor)},M=({el:f,anchor:h},_,x)=>{let y;for(;f&&f!==h;)y=g(f),n(f,_,x),f=y;n(h,_,x)},A=({el:f,anchor:h})=>{let _;for(;f&&f!==h;)_=g(f),r(f),f=_;r(h)},j=(f,h,_,x,y,w,O,I,R)=>{h.type==="svg"?O="svg":h.type==="math"&&(O="mathml"),f==null?H(h,_,x,y,w,O,I,R):Z(f,h,y,w,O,I,R)},H=(f,h,_,x,y,w,O,I)=>{let R,S;const{props:N,shapeFlag:$,transition:B,dirs:U}=f;if(R=f.el=a(f.type,w,N&&N.is,N),$&8?d(R,f.children):$&16&&T(f.children,R,null,x,y,vr(f,w),O,I),U&&Nt(f,null,x,"created"),P(R,f,f.scopeId,O,x),N){for(const ae in N)ae!=="value"&&!Ts(ae)&&i(R,ae,null,N[ae],w,x);"value"in N&&i(R,"value",null,N.value,w),(S=N.onVnodeBeforeMount)&&rt(S,x,f)}U&&Nt(f,null,x,"beforeMount");const Q=sf(y,B);Q&&B.beforeEnter(R),n(R,h,_),((S=N&&N.onVnodeMounted)||Q||U)&&He(()=>{S&&rt(S,x,f),Q&&B.enter(R),U&&Nt(f,null,x,"mounted")},y)},P=(f,h,_,x,y)=>{if(_&&p(f,_),x)for(let w=0;w<x.length;w++)p(f,x[w]);if(y){let w=y.subTree;if(h===w||ll(w.type)&&(w.ssContent===h||w.ssFallback===h)){const O=y.vnode;P(f,O,O.scopeId,O.slotScopeIds,y.parent)}}},T=(f,h,_,x,y,w,O,I,R=0)=>{for(let S=R;S<f.length;S++){const N=f[S]=I?Rt(f[S]):ct(f[S]);m(null,N,h,_,x,y,w,O,I)}},Z=(f,h,_,x,y,w,O)=>{const I=h.el=f.el;let{patchFlag:R,dynamicChildren:S,dirs:N}=h;R|=f.patchFlag&16;const $=f.props||re,B=h.props||re;let U;if(_&&Lt(_,!1),(U=B.onVnodeBeforeUpdate)&&rt(U,_,h,f),N&&Nt(h,f,_,"beforeUpdate"),_&&Lt(_,!0),($.innerHTML&&B.innerHTML==null||$.textContent&&B.textContent==null)&&d(I,""),S?X(f.dynamicChildren,S,I,_,x,vr(h,y),w):O||ie(f,h,I,null,_,x,vr(h,y),w,!1),R>0){if(R&16)q(I,$,B,_,y);else if(R&2&&$.class!==B.class&&i(I,"class",null,B.class,y),R&4&&i(I,"style",$.style,B.style,y),R&8){const Q=h.dynamicProps;for(let ae=0;ae<Q.length;ae++){const se=Q[ae],Le=$[se],ke=B[se];(ke!==Le||se==="value")&&i(I,se,Le,ke,y,_)}}R&1&&f.children!==h.children&&d(I,h.children)}else!O&&S==null&&q(I,$,B,_,y);((U=B.onVnodeUpdated)||N)&&He(()=>{U&&rt(U,_,h,f),N&&Nt(h,f,_,"updated")},x)},X=(f,h,_,x,y,w,O)=>{for(let I=0;I<h.length;I++){const R=f[I],S=h[I],N=R.el&&(R.type===fe||!As(R,S)||R.shapeFlag&70)?c(R.el):_;m(R,S,N,null,x,y,w,O,!0)}},q=(f,h,_,x,y)=>{if(h!==_){if(h!==re)for(const w in h)!Ts(w)&&!(w in _)&&i(f,w,h[w],null,y,x);for(const w in _){if(Ts(w))continue;const O=_[w],I=h[w];O!==I&&w!=="value"&&i(f,w,I,O,y,x)}"value"in _&&i(f,"value",h.value,_.value,y)}},J=(f,h,_,x,y,w,O,I,R)=>{const S=h.el=f?f.el:o(""),N=h.anchor=f?f.anchor:o("");let{patchFlag:$,dynamicChildren:B,slotScopeIds:U}=h;U&&(I=I?I.concat(U):U),f==null?(n(S,_,x),n(N,_,x),T(h.children||[],_,N,y,w,O,I,R)):$>0&&$&64&&B&&f.dynamicChildren?(X(f.dynamicChildren,B,_,y,w,O,I),(h.key!=null||y&&h===y.subTree)&&nl(f,h,!0)):ie(f,h,_,N,y,w,O,I,R)},he=(f,h,_,x,y,w,O,I,R)=>{h.slotScopeIds=I,f==null?h.shapeFlag&512?y.ctx.activate(h,_,x,O,R):_e(h,_,x,y,w,O,R):Mt(f,h,R)},_e=(f,h,_,x,y,w,O)=>{const I=f.component=xf(f,x,y);if(jo(f)&&(I.ctx.renderer=vs),Sf(I,!1,O),I.asyncDep){if(y&&y.registerDep(I,Oe,O),!f.el){const R=I.subTree=dt(Gt);F(null,R,h,_)}}else Oe(I,f,h,_,y,w,O)},Mt=(f,h,_)=>{const x=h.component=f.component;if(df(f,h,_))if(x.asyncDep&&!x.asyncResolved){ce(x,h,_);return}else x.next=h,x.update();else h.el=f.el,x.vnode=h},Oe=(f,h,_,x,y,w,O)=>{const I=()=>{if(f.isMounted){let{next:$,bu:B,u:U,parent:Q,vnode:ae}=f;{const st=rl(f);if(st){$&&($.el=ae.el,ce(f,$,O)),st.asyncDep.then(()=>{f.isUnmounted||I()});return}}let se=$,Le;Lt(f,!1),$?($.el=ae.el,ce(f,$,O)):$=ae,B&&bn(B),(Le=$.props&&$.props.onVnodeBeforeUpdate)&&rt(Le,Q,$,ae),Lt(f,!0);const ke=ba(f),tt=f.subTree;f.subTree=ke,m(tt,ke,c(tt.el),rn(tt),f,y,w),$.el=ke.el,se===null&&hf(f,ke.el),U&&He(U,y),(Le=$.props&&$.props.onVnodeUpdated)&&He(()=>rt(Le,Q,$,ae),y)}else{let $;const{el:B,props:U}=h,{bm:Q,m:ae,parent:se,root:Le,type:ke}=f,tt=ks(h);Lt(f,!1),Q&&bn(Q),!tt&&($=U&&U.onVnodeBeforeMount)&&rt($,se,h),Lt(f,!0);{Le.ce&&Le.ce._injectChildStyle(ke);const st=f.subTree=ba(f);m(null,st,_,x,f,y,w),h.el=st.el}if(ae&&He(ae,y),!tt&&($=U&&U.onVnodeMounted)){const st=h;He(()=>rt($,se,st),y)}(h.shapeFlag&256||se&&ks(se.vnode)&&se.vnode.shapeFlag&256)&&f.a&&He(f.a,y),f.isMounted=!0,h=_=x=null}};f.scope.on();const R=f.effect=new yo(I);f.scope.off();const S=f.update=R.run.bind(R),N=f.job=R.runIfDirty.bind(R);N.i=f,N.id=f.uid,R.scheduler=()=>_i(N),Lt(f,!0),S()},ce=(f,h,_)=>{h.component=f;const x=f.vnode.props;f.vnode=h,f.next=null,Xu(f,h.props,x,_),Zu(f,h.children,_),$t(),da(f),Tt()},ie=(f,h,_,x,y,w,O,I,R=!1)=>{const S=f&&f.children,N=f?f.shapeFlag:0,$=h.children,{patchFlag:B,shapeFlag:U}=h;if(B>0){if(B&128){nn(S,$,_,x,y,w,O,I,R);return}else if(B&256){kt(S,$,_,x,y,w,O,I,R);return}}U&8?(N&16&&ws(S,y,w),$!==S&&d(_,$)):N&16?U&16?nn(S,$,_,x,y,w,O,I,R):ws(S,y,w,!0):(N&8&&d(_,""),U&16&&T($,_,x,y,w,O,I,R))},kt=(f,h,_,x,y,w,O,I,R)=>{f=f||rs,h=h||rs;const S=f.length,N=h.length,$=Math.min(S,N);let B;for(B=0;B<$;B++){const U=h[B]=R?Rt(h[B]):ct(h[B]);m(f[B],U,_,null,y,w,O,I,R)}S>N?ws(f,y,w,!0,!1,$):T(h,_,x,y,w,O,I,R,$)},nn=(f,h,_,x,y,w,O,I,R)=>{let S=0;const N=h.length;let $=f.length-1,B=N-1;for(;S<=$&&S<=B;){const U=f[S],Q=h[S]=R?Rt(h[S]):ct(h[S]);if(As(U,Q))m(U,Q,_,null,y,w,O,I,R);else break;S++}for(;S<=$&&S<=B;){const U=f[$],Q=h[B]=R?Rt(h[B]):ct(h[B]);if(As(U,Q))m(U,Q,_,null,y,w,O,I,R);else break;$--,B--}if(S>$){if(S<=B){const U=B+1,Q=U<N?h[U].el:x;for(;S<=B;)m(null,h[S]=R?Rt(h[S]):ct(h[S]),_,Q,y,w,O,I,R),S++}}else if(S>B)for(;S<=$;)et(f[S],y,w,!0),S++;else{const U=S,Q=S,ae=new Map;for(S=Q;S<=B;S++){const De=h[S]=R?Rt(h[S]):ct(h[S]);De.key!=null&&ae.set(De.key,S)}let se,Le=0;const ke=B-Q+1;let tt=!1,st=0;const xs=new Array(ke);for(S=0;S<ke;S++)xs[S]=0;for(S=U;S<=$;S++){const De=f[S];if(Le>=ke){et(De,y,w,!0);continue}let nt;if(De.key!=null)nt=ae.get(De.key);else for(se=Q;se<=B;se++)if(xs[se-Q]===0&&As(De,h[se])){nt=se;break}nt===void 0?et(De,y,w,!0):(xs[nt-Q]=S+1,nt>=st?st=nt:tt=!0,m(De,h[nt],_,null,y,w,O,I,R),Le++)}const aa=tt?nf(xs):rs;for(se=aa.length-1,S=ke-1;S>=0;S--){const De=Q+S,nt=h[De],oa=De+1<N?h[De+1].el:x;xs[S]===0?m(null,nt,_,oa,y,w,O,I,R):tt&&(se<0||S!==aa[se]?Bt(nt,_,oa,2):se--)}}},Bt=(f,h,_,x,y=null)=>{const{el:w,type:O,transition:I,children:R,shapeFlag:S}=f;if(S&6){Bt(f.component.subTree,h,_,x);return}if(S&128){f.suspense.move(h,_,x);return}if(S&64){O.move(f,h,_,vs);return}if(O===fe){n(w,h,_);for(let $=0;$<R.length;$++)Bt(R[$],h,_,x);n(f.anchor,h,_);return}if(O===vn){M(f,h,_);return}if(x!==2&&S&1&&I)if(x===0)I.beforeEnter(w),n(w,h,_),He(()=>I.enter(w),y);else{const{leave:$,delayLeave:B,afterLeave:U}=I,Q=()=>n(w,h,_),ae=()=>{$(w,()=>{Q(),U&&U()})};B?B(w,Q,ae):ae()}else n(w,h,_)},et=(f,h,_,x=!1,y=!1)=>{const{type:w,props:O,ref:I,children:R,dynamicChildren:S,shapeFlag:N,patchFlag:$,dirs:B,cacheIndex:U}=f;if($===-2&&(y=!1),I!=null&&Mn(I,null,_,f,!0),U!=null&&(h.renderCache[U]=void 0),N&256){h.ctx.deactivate(f);return}const Q=N&1&&B,ae=!ks(f);let se;if(ae&&(se=O&&O.onVnodeBeforeUnmount)&&rt(se,h,f),N&6)$c(f.component,_,x);else{if(N&128){f.suspense.unmount(_,x);return}Q&&Nt(f,null,h,"beforeUnmount"),N&64?f.type.remove(f,h,_,vs,x):S&&!S.hasOnce&&(w!==fe||$>0&&$&64)?ws(S,h,_,!1,!0):(w===fe&&$&384||!y&&N&16)&&ws(R,h,_),x&&ra(f)}(ae&&(se=O&&O.onVnodeUnmounted)||Q)&&He(()=>{se&&rt(se,h,f),Q&&Nt(f,null,h,"unmounted")},_)},ra=f=>{const{type:h,el:_,anchor:x,transition:y}=f;if(h===fe){Oc(_,x);return}if(h===vn){A(f);return}const w=()=>{r(_),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(f.shapeFlag&1&&y&&!y.persisted){const{leave:O,delayLeave:I}=y,R=()=>O(_,w);I?I(f.el,w,R):R()}else w()},Oc=(f,h)=>{let _;for(;f!==h;)_=g(f),r(f),f=_;r(h)},$c=(f,h,_)=>{const{bum:x,scope:y,job:w,subTree:O,um:I,m:R,a:S}=f;ya(R),ya(S),x&&bn(x),y.stop(),w&&(w.flags|=8,et(O,f,h,_)),I&&He(I,h),He(()=>{f.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve())},ws=(f,h,_,x=!1,y=!1,w=0)=>{for(let O=w;O<f.length;O++)et(f[O],h,_,x,y)},rn=f=>{if(f.shapeFlag&6)return rn(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const h=g(f.anchor||f.el),_=h&&h[Cu];return _?g(_):h};let pr=!1;const ia=(f,h,_)=>{f==null?h._vnode&&et(h._vnode,null,null,!0):m(h._vnode||null,f,h,null,null,null,_),h._vnode=f,pr||(pr=!0,da(),No(),pr=!1)},vs={p:m,um:et,m:Bt,r:ra,mt:_e,mc:T,pc:ie,pbc:X,n:rn,o:t};return{render:ia,hydrate:void 0,createApp:Ju(ia)}}function vr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Lt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function sf(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function nl(t,e,s=!1){const n=t.children,r=e.children;if(D(n)&&D(r))for(let i=0;i<n.length;i++){const a=n[i];let o=r[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[i]=Rt(r[i]),o.el=a.el),!s&&o.patchFlag!==-2&&nl(a,o)),o.type===er&&(o.el=a.el)}}function nf(t){const e=t.slice(),s=[0];let n,r,i,a,o;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(r=s[s.length-1],t[r]<u){e[n]=r,s.push(n);continue}for(i=0,a=s.length-1;i<a;)o=i+a>>1,t[s[o]]<u?i=o+1:a=o;u<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,a=s[i-1];i-- >0;)s[i]=a,a=e[a];return s}function rl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:rl(e)}function ya(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const rf=Symbol.for("v-scx"),af=()=>wn(rf);function cs(t,e,s){return il(t,e,s)}function il(t,e,s=re){const{immediate:n,deep:r,flush:i,once:a}=s,o=Me({},s),l=e&&n||!e&&i!=="post";let u;if(Ks){if(i==="sync"){const p=af();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=ft,p.resume=ft,p.pause=ft,p}}const d=Fe;o.call=(p,b,m)=>pt(p,d,b,m);let c=!1;i==="post"?o.scheduler=p=>{He(p,d&&d.suspense)}:i!=="sync"&&(c=!0,o.scheduler=(p,b)=>{b?p():_i(p)}),o.augmentJob=p=>{e&&(p.flags|=4),c&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const g=wu(t,e,o);return Ks&&(u?u.push(g):l&&g()),g}function of(t,e,s){const n=this.proxy,r=pe(t)?t.includes(".")?al(n,t):()=>n[t]:t.bind(n,n);let i;W(e)?i=e:(i=e.handler,s=e);const a=Qs(this),o=il(r,i.bind(n),s);return a(),o}function al(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const lf=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ot(e)}Modifiers`]||t[`${qt(e)}Modifiers`];function cf(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||re;let r=s;const i=e.startsWith("update:"),a=i&&lf(n,e.slice(7));a&&(a.trim&&(r=s.map(d=>pe(d)?d.trim():d)),a.number&&(r=s.map(On)));let o,l=n[o=mr(e)]||n[o=mr(Ot(e))];!l&&i&&(l=n[o=mr(qt(e))]),l&&pt(l,t,6,r);const u=n[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,pt(u,t,6,r)}}function ol(t,e,s=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let a={},o=!1;if(!W(t)){const l=u=>{const d=ol(u,e,!0);d&&(o=!0,Me(a,d))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!o?(le(t)&&n.set(t,null),null):(D(i)?i.forEach(l=>a[l]=null):Me(a,i),le(t)&&n.set(t,a),a)}function Zn(t,e){return!t||!Kn(e)?!1:(e=e.slice(2).replace(/Once$/,""),te(t,e[0].toLowerCase()+e.slice(1))||te(t,qt(e))||te(t,e))}function ba(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:a,attrs:o,emit:l,render:u,renderCache:d,props:c,data:g,setupState:p,ctx:b,inheritAttrs:m}=t,v=Fn(t);let F,C;try{if(s.shapeFlag&4){const A=r||n,j=A;F=ct(u.call(j,A,d,c,p,g,b)),C=o}else{const A=e;F=ct(A.length>1?A(c,{attrs:o,slots:a,emit:l}):A(c,null)),C=e.props?o:uf(o)}}catch(A){Ns.length=0,Yn(A,t,1),F=dt(Gt)}let M=F;if(C&&m!==!1){const A=Object.keys(C),{shapeFlag:j}=M;A.length&&j&7&&(i&&A.some(ii)&&(C=ff(C,i)),M=ps(M,C,!1,!0))}return s.dirs&&(M=ps(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(s.dirs):s.dirs),s.transition&&yi(M,s.transition),F=M,Fn(v),F}const uf=t=>{let e;for(const s in t)(s==="class"||s==="style"||Kn(s))&&((e||(e={}))[s]=t[s]);return e},ff=(t,e)=>{const s={};for(const n in t)(!ii(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function df(t,e,s){const{props:n,children:r,component:i}=t,{props:a,children:o,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?wa(n,a,u):!!a;if(l&8){const d=e.dynamicProps;for(let c=0;c<d.length;c++){const g=d[c];if(a[g]!==n[g]&&!Zn(u,g))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?wa(n,a,u):!0:!!a;return!1}function wa(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!Zn(s,i))return!0}return!1}function hf({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const ll=t=>t.__isSuspense;function pf(t,e){e&&e.pendingBranch?D(t)?e.effects.push(...t):e.effects.push(t):Su(t)}const fe=Symbol.for("v-fgt"),er=Symbol.for("v-txt"),Gt=Symbol.for("v-cmt"),vn=Symbol.for("v-stc"),Ns=[];let Ke=null;function G(t=!1){Ns.push(Ke=t?null:[])}function mf(){Ns.pop(),Ke=Ns[Ns.length-1]||null}let Vs=1;function va(t,e=!1){Vs+=t,t<0&&Ke&&e&&(Ke.hasOnce=!0)}function cl(t){return t.dynamicChildren=Vs>0?Ke||rs:null,mf(),Vs>0&&Ke&&Ke.push(t),t}function Y(t,e,s,n,r,i){return cl(E(t,e,s,n,r,i,!0))}function Bn(t,e,s,n,r){return cl(dt(t,e,s,n,r,!0))}function ul(t){return t?t.__v_isVNode===!0:!1}function As(t,e){return t.type===e.type&&t.key===e.key}const fl=({key:t})=>t??null,xn=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?pe(t)||Ie(t)||W(t)?{i:Je,r:t,k:e,f:!!s}:t:null);function E(t,e=null,s=null,n=0,r=null,i=t===fe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&fl(e),ref:e&&xn(e),scopeId:Do,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Je};return o?(wi(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=pe(s)?8:16),Vs>0&&!a&&Ke&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ke.push(l),l}const dt=gf;function gf(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===Lu)&&(t=Gt),ul(t)){const o=ps(t,e,!0);return s&&wi(o,s),Vs>0&&!i&&Ke&&(o.shapeFlag&6?Ke[Ke.indexOf(t)]=o:Ke.push(o)),o.patchFlag=-2,o}if(Rf(t)&&(t=t.__vccOpts),e){e=_f(e);let{class:o,style:l}=e;o&&!pe(o)&&(e.class=Ye(o)),le(l)&&(gi(l)&&!D(l)&&(l=Me({},l)),e.style=li(l))}const a=pe(t)?1:ll(t)?128:Pu(t)?64:le(t)?4:W(t)?2:0;return E(t,e,s,n,r,a,i,!0)}function _f(t){return t?gi(t)||Qo(t)?Me({},t):t:null}function ps(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:a,children:o,transition:l}=t,u=e?bf(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&fl(u),ref:e&&e.ref?s&&i?D(i)?i.concat(xn(e)):[i,xn(e)]:xn(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==fe?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ps(t.ssContent),ssFallback:t.ssFallback&&ps(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&yi(d,l.clone(d)),d}function dl(t=" ",e=0){return dt(er,null,t,e)}function yf(t,e){const s=dt(vn,null,t);return s.staticCount=e,s}function Ls(t="",e=!1){return e?(G(),Bn(Gt,null,t)):dt(Gt,null,t)}function ct(t){return t==null||typeof t=="boolean"?dt(Gt):D(t)?dt(fe,null,t.slice()):ul(t)?Rt(t):dt(er,null,String(t))}function Rt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ps(t)}function wi(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(D(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),wi(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!Qo(e)?e._ctx=Je:r===3&&Je&&(Je.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else W(e)?(e={default:e,_ctx:Je},s=32):(e=String(e),n&64?(s=16,e=[dl(e)]):s=8);t.children=e,t.shapeFlag|=s}function bf(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Ye([e.class,n.class]));else if(r==="style")e.style=li([e.style,n.style]);else if(Kn(r)){const i=e[r],a=n[r];a&&i!==a&&!(D(i)&&i.includes(a))&&(e[r]=i?[].concat(i,a):a)}else r!==""&&(e[r]=n[r])}return e}function rt(t,e,s,n=null){pt(t,e,7,[s,n])}const wf=Go();let vf=0;function xf(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||wf,i={uid:vf++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Kc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zo(n,r),emitsOptions:ol(n,r),emit:null,emitted:null,propsDefaults:re,inheritAttrs:n.inheritAttrs,ctx:re,data:re,props:re,attrs:re,slots:re,refs:re,setupState:re,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=cf.bind(null,i),t.ce&&t.ce(i),i}let Fe=null,Nn,Wr;{const t=qn(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};Nn=e("__VUE_INSTANCE_SETTERS__",s=>Fe=s),Wr=e("__VUE_SSR_SETTERS__",s=>Ks=s)}const Qs=t=>{const e=Fe;return Nn(t),t.scope.on(),()=>{t.scope.off(),Nn(e)}},xa=()=>{Fe&&Fe.scope.off(),Nn(null)};function hl(t){return t.vnode.shapeFlag&4}let Ks=!1;function Sf(t,e=!1,s=!1){e&&Wr(e);const{props:n,children:r}=t.vnode,i=hl(t);qu(t,n,i,e),zu(t,r,s);const a=i?Af(t,e):void 0;return e&&Wr(!1),a}function Af(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Du);const{setup:n}=s;if(n){$t();const r=t.setupContext=n.length>1?Pf(t):null,i=Qs(t),a=Xs(n,t,0,[t.props,r]),o=co(a);if(Tt(),i(),(o||t.sp)&&!ks(t)&&Uo(t),o){if(a.then(xa,xa),e)return a.then(l=>{Sa(t,l)}).catch(l=>{Yn(l,t,0)});t.asyncDep=a}else Sa(t,a)}else pl(t)}function Sa(t,e,s){W(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:le(e)&&(t.setupState=Fo(e)),pl(t)}function pl(t,e,s){const n=t.type;t.render||(t.render=n.render||ft);{const r=Qs(t);$t();try{Uu(t)}finally{Tt(),r()}}}const Cf={get(t,e){return Pe(t,"get",""),t[e]}};function Pf(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Cf),slots:t.slots,emit:t.emit,expose:e}}function tr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Fo(du(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Bs)return Bs[s](t)},has(e,s){return s in e||s in Bs}})):t.proxy}function Rf(t){return W(t)&&"__vccOpts"in t}const vi=(t,e)=>yu(t,e,Ks),Ef="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vr;const Aa=typeof window<"u"&&window.trustedTypes;if(Aa)try{Vr=Aa.createPolicy("vue",{createHTML:t=>t})}catch{}const ml=Vr?t=>Vr.createHTML(t):t=>t,If="http://www.w3.org/2000/svg",Of="http://www.w3.org/1998/Math/MathML",yt=typeof document<"u"?document:null,Ca=yt&&yt.createElement("template"),$f={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?yt.createElementNS(If,t):e==="mathml"?yt.createElementNS(Of,t):s?yt.createElement(t,{is:s}):yt.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>yt.createTextNode(t),createComment:t=>yt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>yt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const a=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{Ca.innerHTML=ml(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const o=Ca.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,s)}return[a?a.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Tf=Symbol("_vtc");function Ff(t,e,s){const n=t[Tf];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Pa=Symbol("_vod"),Mf=Symbol("_vsh"),kf=Symbol(""),Bf=/(^|;)\s*display\s*:/;function Nf(t,e,s){const n=t.style,r=pe(s);let i=!1;if(s&&!r){if(e)if(pe(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();s[o]==null&&Sn(n,o,"")}else for(const a in e)s[a]==null&&Sn(n,a,"");for(const a in s)a==="display"&&(i=!0),Sn(n,a,s[a])}else if(r){if(e!==s){const a=n[kf];a&&(s+=";"+a),n.cssText=s,i=Bf.test(s)}}else e&&t.removeAttribute("style");Pa in t&&(t[Pa]=i?n.display:"",t[Mf]&&(n.display="none"))}const Ra=/\s*!important$/;function Sn(t,e,s){if(D(s))s.forEach(n=>Sn(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=Lf(t,e);Ra.test(s)?t.setProperty(qt(n),s.replace(Ra,""),"important"):t[n]=s}}const Ea=["Webkit","Moz","ms"],xr={};function Lf(t,e){const s=xr[e];if(s)return s;let n=Ot(e);if(n!=="filter"&&n in t)return xr[e]=n;n=ho(n);for(let r=0;r<Ea.length;r++){const i=Ea[r]+n;if(i in t)return xr[e]=i}return e}const Ia="http://www.w3.org/1999/xlink";function Oa(t,e,s,n,r,i=Hc(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Ia,e.slice(6,e.length)):t.setAttributeNS(Ia,e,s):s==null||i&&!mo(s)?t.removeAttribute(e):t.setAttribute(e,i?"":ht(s)?String(s):s)}function $a(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?ml(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(o!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let a=!1;if(s===""||s==null){const o=typeof t[e];o==="boolean"?s=mo(s):s==null&&o==="string"?(s="",a=!0):o==="number"&&(s=0,a=!0)}try{t[e]=s}catch{}a&&t.removeAttribute(r||e)}function jt(t,e,s,n){t.addEventListener(e,s,n)}function Df(t,e,s,n){t.removeEventListener(e,s,n)}const Ta=Symbol("_vei");function Uf(t,e,s,n,r=null){const i=t[Ta]||(t[Ta]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=jf(e);if(n){const u=i[e]=Vf(n,r);jt(t,o,u,l)}else a&&(Df(t,o,a,l),i[e]=void 0)}}const Fa=/(?:Once|Passive|Capture)$/;function jf(t){let e;if(Fa.test(t)){e={};let n;for(;n=t.match(Fa);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):qt(t.slice(2)),e]}let Sr=0;const Hf=Promise.resolve(),Wf=()=>Sr||(Hf.then(()=>Sr=0),Sr=Date.now());function Vf(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;pt(Kf(n,s.value),e,5,[n])};return s.value=t,s.attached=Wf(),s}function Kf(t,e){if(D(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Ma=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Jf=(t,e,s,n,r,i)=>{const a=r==="svg";e==="class"?Ff(t,n,a):e==="style"?Nf(t,s,n):Kn(e)?ii(e)||Uf(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Gf(t,e,n,a))?($a(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Oa(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!pe(n))?$a(t,Ot(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Oa(t,e,n,a))};function Gf(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ma(e)&&W(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Ma(e)&&pe(s)?!1:e in t}const Ln=t=>{const e=t.props["onUpdate:modelValue"]||!1;return D(e)?s=>bn(e,s):e};function qf(t){t.target.composing=!0}function ka(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const us=Symbol("_assign"),cn={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[us]=Ln(r);const i=n||r.props&&r.props.type==="number";jt(t,e?"change":"input",a=>{if(a.target.composing)return;let o=t.value;s&&(o=o.trim()),i&&(o=On(o)),t[us](o)}),s&&jt(t,"change",()=>{t.value=t.value.trim()}),e||(jt(t,"compositionstart",qf),jt(t,"compositionend",ka),jt(t,"change",ka))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},a){if(t[us]=Ln(a),t.composing)return;const o=(i||t.type==="number")&&!/^0\d/.test(t.value)?On(t.value):t.value,l=e??"";o!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===l)||(t.value=l))}},Dn={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const r=Jn(e);jt(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>s?On(Un(a)):Un(a));t[us](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,ko(()=>{t._assigning=!1})}),t[us]=Ln(n)},mounted(t,{value:e}){Ba(t,e)},beforeUpdate(t,e,s){t[us]=Ln(s)},updated(t,{value:e}){t._assigning||Ba(t,e)}};function Ba(t,e){const s=t.multiple,n=D(e);if(!(s&&!n&&!Jn(e))){for(let r=0,i=t.options.length;r<i;r++){const a=t.options[r],o=Un(a);if(s)if(n){const l=typeof o;l==="string"||l==="number"?a.selected=e.some(u=>String(u)===String(o)):a.selected=Vc(e,o)>-1}else a.selected=e.has(o);else if(Xn(Un(a),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Un(t){return"_value"in t?t._value:t.value}const Xf=Me({patchProp:Jf},$f);let Na;function Qf(){return Na||(Na=ef(Xf))}const Yf=(...t)=>{const e=Qf().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=Zf(n);if(!r)return;const i=e._component;!W(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=s(r,!1,zf(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function zf(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Zf(t){return pe(t)?document.querySelector(t):t}const xi=()=>localStorage.getItem("apiKey"),ed=t=>{localStorage.setItem("apiKey",t)},gl="quickPlayerNames",td=["++","邦","Ashley","STK Rax","PO1"],Wt=()=>{const t=localStorage.getItem(gl);return t?JSON.parse(t):td},Si=t=>{localStorage.setItem(gl,JSON.stringify(t))},sd=t=>{const e=Wt();e.includes(t)||(e.push(t),Si(e))},nd=t=>{const e=Wt();e.splice(t,1),Si(e)},rd=(t,e)=>{const s=Wt();s[t]=e,Si(s)},Ai=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},id={class:"game-setup"},ad={class:"setup-form"},od={class:"form-group"},ld=["value"],cd={class:"form-group"},ud={class:"form-group"},fd={class:"form-group"},dd={class:"form-group player-names"},hd={class:"player-name-list"},pd=["onUpdate:modelValue","placeholder"],md={class:"quick-names"},gd=["onClick"],_d={class:"form-group"},yd={class:"quick-names-editor"},bd={class:"quick-names-list"},wd=["onUpdate:modelValue","onChange"],vd=["onClick"],xd={__name:"GameSetup",emits:["start-game"],setup(t,{emit:e}){const s=e,n=Ee({players:6,initialStack:50,smallBlind:.5,bigBlind:1,apiModel:"gpt-4o"}),r=Ee([]),i=Ee([]),a=Ee(""),o=Ee(!1),l=()=>{ed(a.value),o.value=!!a.value},u=()=>{r.value=Array(n.value.players-1).fill("").map((b,m)=>`玩家${m+1}`)};cs(()=>n.value.players,b=>{const m=[...r.value];r.value=Array(b-1).fill("").map((v,F)=>m[F]||`玩家${F+1}`)}),Wo(()=>{u(),a.value=xi()||"",o.value=!!a.value,i.value=Wt(),n.value.apiModel=localStorage.getItem("apiModel")||"gpt-4o"}),cs(()=>n.value.apiModel,b=>{localStorage.setItem("apiModel",b)});const d=()=>{sd(""),i.value=Wt()},c=b=>{nd(b),i.value=Wt()},g=(b,m)=>{rd(b,m),i.value=Wt()},p=()=>{if(!o.value){alert("請先設定 API Key");return}s("start-game",{...n.value,playerNames:r.value})};return(b,m)=>(G(),Y("div",id,[m[11]||(m[11]=E("h2",null,"遊戲設定",-1)),E("div",ad,[E("div",od,[m[4]||(m[4]=E("label",null,"玩家人數：",-1)),Pt(E("select",{"onUpdate:modelValue":m[0]||(m[0]=v=>n.value.players=v)},[(G(),Y(fe,null,Ne(9,v=>E("option",{key:v,value:v},we(v)+"人",9,ld)),64))],512),[[Dn,n.value.players]])]),E("div",cd,[m[5]||(m[5]=E("label",null,"初始籌碼 BB：",-1)),Pt(E("input",{type:"number","onUpdate:modelValue":m[1]||(m[1]=v=>n.value.initialStack=v),min:"100",step:"100"},null,512),[[cn,n.value.initialStack]])]),E("div",ud,[m[6]||(m[6]=E("label",null,"API Key：",-1)),Pt(E("input",{type:"password","onUpdate:modelValue":m[2]||(m[2]=v=>a.value=v),placeholder:"請輸入 API Key",onInput:l},null,544),[[cn,a.value]]),E("span",{class:Ye(["api-key-status",{valid:o.value}])},we(o.value?"已設定":"未設定"),3)]),E("div",fd,[m[8]||(m[8]=E("label",null,"OpenAPI 模型：",-1)),Pt(E("select",{"onUpdate:modelValue":m[3]||(m[3]=v=>n.value.apiModel=v)},m[7]||(m[7]=[yf('<option value="gpt-4.1" data-v-7e413da9>gpt-4.1 (貴快聰明)</option><option value="gpt-4.1-mini" data-v-7e413da9>gpt-4.1-mini (便宜、很快、聰明)</option><option value="gpt-4o" data-v-7e413da9>gpt-4o (貴快聰明)</option><option value="o4-mini" data-v-7e413da9>o4-mini (中價、快、聰明)</option><option value="o3-mini" data-v-7e413da9>o3-mini (中價、快、聰明)</option>',5)]),512),[[Dn,n.value.apiModel]])]),E("div",dd,[m[9]||(m[9]=E("label",null,"玩家名稱：",-1)),E("div",hd,[(G(!0),Y(fe,null,Ne(n.value.players-1,v=>(G(),Y("div",{key:v,class:"player-name-item"},[Pt(E("input",{type:"text","onUpdate:modelValue":F=>r.value[v-1]=F,placeholder:`玩家${v}`,class:"name-input"},null,8,pd),[[cn,r.value[v-1]]]),E("div",md,[(G(!0),Y(fe,null,Ne(i.value,F=>(G(),Y("button",{key:F,class:"quick-name-btn",onClick:C=>r.value[v-1]=F},we(F),9,gd))),128))])]))),128))])]),E("div",_d,[m[10]||(m[10]=E("label",null,"常用名稱：",-1)),E("div",yd,[E("div",bd,[(G(!0),Y(fe,null,Ne(i.value,(v,F)=>(G(),Y("div",{key:F,class:"quick-name-item"},[Pt(E("input",{type:"text","onUpdate:modelValue":C=>i.value[F]=C,class:"quick-name-input",onChange:C=>g(F,i.value[F])},null,40,wd),[[cn,i.value[F]]]),E("button",{class:"remove-btn",onClick:C=>c(F)},"×",8,vd)]))),128))]),E("button",{class:"add-btn",onClick:d},"新增常用名稱")])]),E("button",{class:"start-btn",onClick:p},"開始遊戲")])]))}},Sd=Ai(xd,[["__scopeId","data-v-7e413da9"]]),Ad={class:"player-info"},Cd={class:"player-name"},Pd={key:0,class:"small-blind"},Rd={class:"player-stack"},Ed={class:"player-actions"},Id=["onClick"],Od={key:0,class:"raise-window"},$d={class:"raise-options"},Td=["onClick"],Fd={__name:"Player",props:{name:{type:String,required:!0},stack:{type:Number,required:!0},isActive:{type:Boolean,default:!0},isSmallBlind:{type:Boolean,default:!1}},emits:["action"],setup(t,{expose:e,emit:s}){const n=s,r=["CHECK","CALL","FOLD","RAISE"],i=Ee(""),a=Ee(null),o=Ee(!1),l=[1,2,3,4,5,6,7,8,9,10],u=vi(()=>a.value?`RAISE ${a.value}BB`:"RAISE +"),d=p=>{p==="RAISE"?(o.value=!0,i.value=p):(i.value=p,a.value=null,n("action",{type:p}))},c=p=>{a.value=p,o.value=!1,n("action",{type:"RAISE",amount:p})};return e({resetState:()=>{i.value="",a.value=null,o.value=!1}}),(p,b)=>(G(),Y("div",{class:Ye(["player",{active:t.isActive}])},[E("div",Ad,[E("div",Cd,[dl(we(t.name)+" ",1),t.isSmallBlind?(G(),Y("span",Pd,"SB")):Ls("",!0)]),E("div",Rd,we(t.stack)+"BB",1)]),E("div",Ed,[(G(),Y(fe,null,Ne(r,m=>E("button",{key:m,class:Ye(["action-btn",{selected:i.value===m}]),onClick:v=>d(m)},we(m),11,Id)),64)),i.value==="RAISE"?(G(),Y("button",{key:0,class:Ye(["action-btn raise-amount",{selected:a.value}]),onClick:b[0]||(b[0]=m=>o.value=!0)},we(u.value),3)):Ls("",!0)]),o.value?(G(),Y("div",Od,[E("div",$d,[(G(),Y(fe,null,Ne(l,m=>E("button",{key:m,class:Ye(["raise-option",{selected:a.value===m}]),onClick:v=>c(m)},we(m)+"BB ",11,Td)),64))])])):Ls("",!0)],2))}},Md=Ai(Fd,[["__scopeId","data-v-52430f29"]]),z={BTN:"BTN",SB:"SB",BB:"BB",UTG:"UTG",UTG1:"UTG1",UTG2:"UTG2",MP:"MP",MP1:"MP1",CO:"CO",HJ:"HJ"},ye={PREFLOP:"preflop",FLOP:"flop",TURN:"turn",RIVER:"river"},Ce={FOLD:"FOLD",CALL:"CALL",RAISE:"RAISE",SMALL_BLIND:"SMALL_BLIND",BIG_BLIND:"BIG_BLIND"};class kd{constructor(e){this.config=e,this.players=[],this.pot=0,this.currentStage=ye.PREFLOP,this.smallBlindIndex=1,this.actionHistory={[ye.PREFLOP]:[],[ye.FLOP]:[],[ye.TURN]:[],[ye.RIVER]:[]},this.currentBet=0,this.lastRaise=0,this.minRaise=this.config.bigBlind,this.initializePlayers(),this.initializeBlinds()}initializePlayers(){var e;this.players=[];for(let s=0;s<this.config.players;s++)this.players.push({id:s+1,name:s===0?"Hero":((e=this.config.playerNames)==null?void 0:e[s-1])||`玩家${s}`,stack:this.config.initialStack,position:this.getPosition(s),hasActed:!1,action:null,raiseAmount:0,isFolded:!1})}initializeBlinds(){const e=this.players[this.smallBlindIndex],s=this.players[(this.smallBlindIndex+1)%this.config.players];this.updatePlayerAction(e.id,Ce.SMALL_BLIND,this.config.bigBlind/2),this.updatePlayerAction(s.id,Ce.BIG_BLIND,this.config.bigBlind)}getPosition(e){const{players:s}=this.config;if(s<3||s>10)throw new Error("Supported player count is from 3 to 10.");if(e<0||e>=s)throw new Error("Invalid player index.");const n=[z.BTN,z.SB,z.BB],r={3:[],4:[z.UTG],5:[z.UTG,z.CO],6:[z.UTG,z.HJ,z.CO],7:[z.UTG,z.UTG1,z.HJ,z.CO],8:[z.UTG,z.UTG1,z.MP,z.HJ,z.CO],9:[z.UTG,z.UTG1,z.MP,z.MP1,z.HJ,z.CO],10:[z.UTG,z.UTG1,z.UTG2,z.MP,z.MP1,z.HJ,z.CO]},i=[...n,...r[s]],a=(s-this.smallBlindIndex+1)%s;return[...i.slice(a),...i.slice(0,a)][e]}get hero(){return this.players.find(e=>e.id===1)}get heroPosition(){var e;return((e=this.hero)==null?void 0:e.position)||null}get heroStack(){var e;return((e=this.hero)==null?void 0:e.stack)||0}rotateSmallBlind(){const{players:e}=this.config;this.smallBlindIndex=(this.smallBlindIndex+1)%e,this.resetGame()}updatePlayerAction(e,s,n=null){const r=this.players.find(a=>a.id===e);if(!r)return;let i=0;if(s===Ce.CALL){const a=this.currentBet,o=r.raiseAmount||0;i=a-o}else s===Ce.RAISE?i=n-r.raiseAmount||0:s===Ce.SMALL_BLIND?i=this.config.bigBlind/2:s===Ce.BIG_BLIND&&(i=this.config.bigBlind,this.currentBet=this.config.bigBlind);this.actionHistory[this.currentStage].push({playerId:e,position:r.position,action:s,raiseAmount:(r.raiseAmount||0)+i,timestamp:new Date().toISOString()}),r.action=s,r.raiseAmount=(r.raiseAmount||0)+i,r.hasActed=!0,s===Ce.FOLD&&(r.isFolded=!0),s===Ce.RAISE?(this.lastRaise=n,this.minRaise=Math.max(this.minRaise,n*2),this.currentBet=n):s===Ce.CALL&&(this.currentBet=Math.max(this.currentBet,r.raiseAmount)),s!==Ce.FOLD&&(this.pot+=i)}allPlayersActed(){return this.players.every(e=>e.hasActed||e.isFolded||this.currentStage===ye.PREFLOP&&(e.action===Ce.SMALL_BLIND||e.action===Ce.BIG_BLIND))}nextStage(){if(!this.allPlayersActed())throw new Error("Not all players have acted yet");switch(this.currentStage){case ye.PREFLOP:this.currentStage=ye.FLOP;break;case ye.FLOP:this.currentStage=ye.TURN;break;case ye.TURN:this.currentStage=ye.RIVER;break;case ye.RIVER:this.resetGame();return}this.players.forEach(e=>{e.isFolded||(e.action=null,e.raiseAmount=0,e.hasActed=!1)}),this.currentBet=0,this.lastRaise=0,this.minRaise=this.config.bigBlind}resetGame(){this.pot=0,this.currentStage=ye.PREFLOP,this.actionHistory={[ye.PREFLOP]:[],[ye.FLOP]:[],[ye.TURN]:[],[ye.RIVER]:[]},this.currentBet=0,this.lastRaise=0,this.minRaise=this.config.bigBlind,this.initializePlayers(),this.initializeBlinds()}getGameState(){return{players:this.players.map(e=>({id:e.id,name:e.name,stack:e.stack,position:e.position,action:e.action,raiseAmount:e.raiseAmount,isFolded:e.isFolded})),pot:this.pot,bigBlind:this.config.bigBlind,currentStage:this.currentStage,heroPosition:this.heroPosition,heroStack:this.heroStack,actionHistory:this.actionHistory,currentBet:this.currentBet,lastRaise:this.lastRaise,minRaise:this.minRaise}}getFormattedActionHistory(){let e="";return Object.entries(this.actionHistory).forEach(([s,n])=>{n.length>0&&(e+=`
${s.toUpperCase()}:
`,n.forEach(r=>{const i=this.players.find(a=>a.id===r.playerId);e+=`${i.name} (${r.position}): ${r.action}`,r.raiseAmount&&(e+=` ${r.raiseAmount}BB`),e+=`
`}))}),e}}const Kr="RFC3986",Jr={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},Bd="RFC1738",Nd=Array.isArray,it=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Ar=1024,Ld=(t,e,s,n,r)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),s==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<i.length;o+=Ar){const l=i.length>=Ar?i.slice(o,o+Ar):i,u=[];for(let d=0;d<l.length;++d){let c=l.charCodeAt(d);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||r===Bd&&(c===40||c===41)){u[u.length]=l.charAt(d);continue}if(c<128){u[u.length]=it[c];continue}if(c<2048){u[u.length]=it[192|c>>6]+it[128|c&63];continue}if(c<55296||c>=57344){u[u.length]=it[224|c>>12]+it[128|c>>6&63]+it[128|c&63];continue}d+=1,c=65536+((c&1023)<<10|l.charCodeAt(d)&1023),u[u.length]=it[240|c>>18]+it[128|c>>12&63]+it[128|c>>6&63]+it[128|c&63]}a+=u.join("")}return a};function Dd(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function La(t,e){if(Nd(t)){const s=[];for(let n=0;n<t.length;n+=1)s.push(e(t[n]));return s}return e(t)}const Ud=Object.prototype.hasOwnProperty,_l={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},ot=Array.isArray,jd=Array.prototype.push,yl=function(t,e){jd.apply(t,ot(e)?e:[e])},Hd=Date.prototype.toISOString,ge={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ld,encodeValuesOnly:!1,format:Kr,formatter:Jr[Kr],indices:!1,serializeDate(t){return Hd.call(t)},skipNulls:!1,strictNullHandling:!1};function Wd(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Cr={};function bl(t,e,s,n,r,i,a,o,l,u,d,c,g,p,b,m,v,F){let C=t,M=F,A=0,j=!1;for(;(M=M.get(Cr))!==void 0&&!j;){const X=M.get(t);if(A+=1,typeof X<"u"){if(X===A)throw new RangeError("Cyclic object value");j=!0}typeof M.get(Cr)>"u"&&(A=0)}if(typeof u=="function"?C=u(e,C):C instanceof Date?C=g==null?void 0:g(C):s==="comma"&&ot(C)&&(C=La(C,function(X){return X instanceof Date?g==null?void 0:g(X):X})),C===null){if(i)return l&&!m?l(e,ge.encoder,v,"key",p):e;C=""}if(Wd(C)||Dd(C)){if(l){const X=m?e:l(e,ge.encoder,v,"key",p);return[(b==null?void 0:b(X))+"="+(b==null?void 0:b(l(C,ge.encoder,v,"value",p)))]}return[(b==null?void 0:b(e))+"="+(b==null?void 0:b(String(C)))]}const H=[];if(typeof C>"u")return H;let P;if(s==="comma"&&ot(C))m&&l&&(C=La(C,l)),P=[{value:C.length>0?C.join(",")||null:void 0}];else if(ot(u))P=u;else{const X=Object.keys(C);P=d?X.sort(d):X}const T=o?String(e).replace(/\./g,"%2E"):String(e),Z=n&&ot(C)&&C.length===1?T+"[]":T;if(r&&ot(C)&&C.length===0)return Z+"[]";for(let X=0;X<P.length;++X){const q=P[X],J=typeof q=="object"&&typeof q.value<"u"?q.value:C[q];if(a&&J===null)continue;const he=c&&o?q.replace(/\./g,"%2E"):q,_e=ot(C)?typeof s=="function"?s(Z,he):Z:Z+(c?"."+he:"["+he+"]");F.set(t,A);const Mt=new WeakMap;Mt.set(Cr,F),yl(H,bl(J,_e,s,n,r,i,a,o,s==="comma"&&m&&ot(C)?null:l,u,d,c,g,p,b,m,v,Mt))}return H}function Vd(t=ge){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||ge.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let s=Kr;if(typeof t.format<"u"){if(!Ud.call(Jr,t.format))throw new TypeError("Unknown format option provided.");s=t.format}const n=Jr[s];let r=ge.filter;(typeof t.filter=="function"||ot(t.filter))&&(r=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in _l?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=ge.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:ge.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ge.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ge.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ge.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?ge.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ge.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:ge.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:ge.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ge.encodeValuesOnly,filter:r,format:s,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ge.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ge.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ge.strictNullHandling}}function Kd(t,e={}){let s=t;const n=Vd(e);let r,i;typeof n.filter=="function"?(i=n.filter,s=i("",s)):ot(n.filter)&&(i=n.filter,r=i);const a=[];if(typeof s!="object"||s===null)return"";const o=_l[n.arrayFormat],l=o==="comma"&&n.commaRoundTrip;r||(r=Object.keys(s)),n.sort&&r.sort(n.sort);const u=new WeakMap;for(let g=0;g<r.length;++g){const p=r[g];n.skipNulls&&s[p]===null||yl(a,bl(s[p],p,o,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}const d=a.join(n.delimiter);let c=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),d.length>0?c+d:""}const ts="4.96.2";let Da=!1,Ds,wl,vl,Gr,xl,Sl,Al,Cl,Pl;function Jd(t,e={auto:!1}){if(Da)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Ds)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Ds}'\``);Da=e.auto,Ds=t.kind,wl=t.fetch,vl=t.FormData,Gr=t.File,xl=t.ReadableStream,Sl=t.getMultipartRequestOptions,Al=t.getDefaultAgent,Cl=t.fileFromPath,Pl=t.isFsReadStream}class Gd{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function qd({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let s,n,r,i;try{s=fetch,n=Request,r=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:s,Request:n,Response:r,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new Gd(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}const Rl=()=>{Ds||Jd(qd(),{auto:!0})};Rl();class L extends Error{}class xe extends L{constructor(e,s,n,r){super(`${xe.makeMessage(e,s,n)}`),this.status=e,this.headers=r,this.request_id=r==null?void 0:r["x-request-id"],this.error=s;const i=s;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,s,n){const r=s!=null&&s.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,s,n,r){if(!e||!r)return new sr({message:n,cause:Xr(s)});const i=s==null?void 0:s.error;return e===400?new El(e,i,n,r):e===401?new Il(e,i,n,r):e===403?new Ol(e,i,n,r):e===404?new $l(e,i,n,r):e===409?new Tl(e,i,n,r):e===422?new Fl(e,i,n,r):e===429?new Ml(e,i,n,r):e>=500?new kl(e,i,n,r):new xe(e,i,n,r)}}class Ge extends xe{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class sr extends xe{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),s&&(this.cause=s)}}class Ci extends sr{constructor({message:e}={}){super({message:e??"Request timed out."})}}class El extends xe{}class Il extends xe{}class Ol extends xe{}class $l extends xe{}class Tl extends xe{}class Fl extends xe{}class Ml extends xe{}class kl extends xe{}class Bl extends L{constructor(){super("Could not parse response content as the length limit was reached")}}class Nl extends L{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var un=function(t,e,s,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s},Dt=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},je;class nr{constructor(){je.set(this,void 0),this.buffer=new Uint8Array,un(this,je,null,"f")}decode(e){if(e==null)return[];const s=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let n=new Uint8Array(this.buffer.length+s.length);n.set(this.buffer),n.set(s,this.buffer.length),this.buffer=n;const r=[];let i;for(;(i=Xd(this.buffer,Dt(this,je,"f")))!=null;){if(i.carriage&&Dt(this,je,"f")==null){un(this,je,i.index,"f");continue}if(Dt(this,je,"f")!=null&&(i.index!==Dt(this,je,"f")+1||i.carriage)){r.push(this.decodeText(this.buffer.slice(0,Dt(this,je,"f")-1))),this.buffer=this.buffer.slice(Dt(this,je,"f")),un(this,je,null,"f");continue}const a=Dt(this,je,"f")!==null?i.preceding-1:i.preceding,o=this.decodeText(this.buffer.slice(0,a));r.push(o),this.buffer=this.buffer.slice(i.index),un(this,je,null,"f")}return r}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new L(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new L(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new L("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}je=new WeakMap;nr.NEWLINE_CHARS=new Set([`
`,"\r"]);nr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Xd(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Qd(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}function Ll(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const s=await e.read();return s!=null&&s.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class ut{constructor(e,s){this.iterator=e,this.controller=s}static fromSSEResponse(e,s){let n=!1;async function*r(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const a of Yd(e,s))if(!i){if(a.data.startsWith("[DONE]")){i=!0;continue}if(a.event===null||a.event.startsWith("response.")||a.event.startsWith("transcript.")){let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(o&&o.error)throw new xe(void 0,o.error,void 0,Kl(e.headers));yield o}else{let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new xe(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||s.abort()}}return new ut(r,s)}static fromReadableStream(e,s){let n=!1;async function*r(){const a=new nr,o=Ll(e);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const o of r())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||s.abort()}}return new ut(i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],s=[],n=this.iterator(),r=i=>({next:()=>{if(i.length===0){const a=n.next();e.push(a),s.push(a)}return i.shift()}});return[new ut(()=>r(e),this.controller),new ut(()=>r(s),this.controller)]}toReadableStream(){const e=this;let s;const n=new TextEncoder;return new xl({async start(){s=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await s.next();if(a)return r.close();const o=n.encode(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=s.return)==null?void 0:r.call(s))}})}}async function*Yd(t,e){if(!t.body)throw e.abort(),new L("Attempted to iterate over a response with no body");const s=new Zd,n=new nr,r=Ll(t.body);for await(const i of zd(r))for(const a of n.decode(i)){const o=s.decode(a);o&&(yield o)}for(const i of n.flush()){const a=s.decode(i);a&&(yield a)}}async function*zd(t){let e=new Uint8Array;for await(const s of t){if(s==null)continue;const n=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?new TextEncoder().encode(s):s;let r=new Uint8Array(e.length+n.length);r.set(e),r.set(n,e.length),e=r;let i;for(;(i=Qd(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class Zd{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,n,r]=eh(e,":");return r.startsWith(" ")&&(r=r.substring(1)),s==="event"?this.event=r:s==="data"&&this.data.push(r),null}}function eh(t,e){const s=t.indexOf(e);return s!==-1?[t.substring(0,s),e,t.substring(s+e.length)]:[t,"",""]}const Dl=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Ul=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&rr(t),rr=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",th=t=>Ul(t)||Dl(t)||Pl(t);async function jl(t,e,s){var r;if(t=await t,Ul(t))return t;if(Dl(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=rr(i)?[await i.arrayBuffer()]:[i];return new Gr(a,e,s)}const n=await sh(t);if(e||(e=rh(t)??"unknown_file"),!(s!=null&&s.type)){const i=(r=n[0])==null?void 0:r.type;typeof i=="string"&&(s={...s,type:i})}return new Gr(n,e,s)}async function sh(t){var s;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(rr(t))e.push(await t.arrayBuffer());else if(ih(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(s=t==null?void 0:t.constructor)==null?void 0:s.name}; props: ${nh(t)}`);return e}function nh(t){return`[${Object.getOwnPropertyNames(t).map(s=>`"${s}"`).join(", ")}]`}function rh(t){var e;return Pr(t.name)||Pr(t.filename)||((e=Pr(t.path))==null?void 0:e.split(/[\\/]/).pop())}const Pr=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},ih=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Ua=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",ms=async t=>{const e=await ah(t.body);return Sl(e,t)},ah=async t=>{const e=new vl;return await Promise.all(Object.entries(t||{}).map(([s,n])=>qr(e,s,n))),e},qr=async(t,e,s)=>{if(s!==void 0){if(s==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")t.append(e,String(s));else if(th(s)){const n=await jl(s);t.append(e,n)}else if(Array.isArray(s))await Promise.all(s.map(n=>qr(t,e+"[]",n)));else if(typeof s=="object")await Promise.all(Object.entries(s).map(([n,r])=>qr(t,`${e}[${n}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`)}};var fs={},oh=function(t,e,s,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,s),s},lh=function(t,e,s,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},fn;Rl();async function Hl(t){var a;const{response:e}=t;if(t.options.stream)return It("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):ut.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const s=e.headers.get("content-type"),n=(a=s==null?void 0:s.split(";")[0])==null?void 0:a.trim();if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.endsWith("+json"))){const o=await e.json();return It("response",e.status,e.url,e.headers,o),Wl(o,e)}const i=await e.text();return It("response",e.status,e.url,e.headers,i),i}function Wl(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class ir extends Promise{constructor(e,s=Hl){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=s}_thenUnwrap(e){return new ir(this.responsePromise,async s=>Wl(e(await this.parseResponse(s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s,request_id:s.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class ch{constructor({baseURL:e,maxRetries:s=2,timeout:n=6e5,httpAgent:r,fetch:i}){this.baseURL=e,this.maxRetries=Rr("maxRetries",s),this.timeout=Rr("timeout",n),this.httpAgent=r,this.fetch=i??wl}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...ph(),...this.authHeaders(e)}}validateHeaders(e,s){}defaultIdempotencyKey(){return`stainless-node-retry-${yh()}`}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,n){return this.request(Promise.resolve(n).then(async r=>{const i=r&&rr(r==null?void 0:r.body)?new DataView(await r.body.arrayBuffer()):(r==null?void 0:r.body)instanceof DataView?r.body:(r==null?void 0:r.body)instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r==null?void 0:r.body)?new DataView(r.body.buffer):r==null?void 0:r.body;return{method:e,path:s,...r,body:i}}))}getAPIList(e,s,n){return this.requestAPIList(s,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:s=0}={}){var m;const n={...e},{method:r,path:i,query:a,headers:o={}}=n,l=ArrayBuffer.isView(n.body)||n.__binaryRequest&&typeof n.body=="string"?n.body:Ua(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,u=this.calculateContentLength(l),d=this.buildURL(i,a);"timeout"in n&&Rr("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const c=n.httpAgent??this.httpAgent??Al(d),g=n.timeout+1e3;typeof((m=c==null?void 0:c.options)==null?void 0:m.timeout)=="number"&&g>(c.options.timeout??0)&&(c.options.timeout=g),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const p=this.buildHeaders({options:n,headers:o,contentLength:u,retryCount:s});return{req:{method:r,...l&&{body:l},headers:p,...c&&{agent:c},signal:n.signal??null},url:d,timeout:n.timeout}}buildHeaders({options:e,headers:s,contentLength:n,retryCount:r}){const i={};n&&(i["content-length"]=n);const a=this.defaultHeaders(e);return Va(i,a),Va(i,s),Ua(e.body)&&Ds!=="node"&&delete i["content-type"],hn(a,"x-stainless-retry-count")===void 0&&hn(s,"x-stainless-retry-count")===void 0&&(i["x-stainless-retry-count"]=String(r)),hn(a,"x-stainless-timeout")===void 0&&hn(s,"x-stainless-timeout")===void 0&&e.timeout&&(i["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,s),i}async prepareOptions(e){}async prepareRequest(e,{url:s,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(s=>[...s])):{...e}:{}}makeStatusError(e,s,n,r){return xe.generate(e,s,n,r)}request(e,s=null){return new ir(this.makeRequest(e,s))}async makeRequest(e,s){var c,g;const n=await e,r=n.maxRetries??this.maxRetries;s==null&&(s=r),await this.prepareOptions(n);const{req:i,url:a,timeout:o}=this.buildRequest(n,{retryCount:r-s});if(await this.prepareRequest(i,{url:a,options:n}),It("request",a,n,i.headers),(c=n.signal)!=null&&c.aborted)throw new Ge;const l=new AbortController,u=await this.fetchWithTimeout(a,i,o,l).catch(Xr);if(u instanceof Error){if((g=n.signal)!=null&&g.aborted)throw new Ge;if(s)return this.retryRequest(n,s);throw u.name==="AbortError"?new Ci:new sr({cause:u})}const d=Kl(u.headers);if(!u.ok){if(s&&this.shouldRetry(u)){const C=`retrying, ${s} attempts remaining`;return It(`response (error; ${C})`,u.status,a,d),this.retryRequest(n,s,d)}const p=await u.text().catch(C=>Xr(C).message),b=mh(p),m=b?void 0:p;throw It(`response (error; ${s?"(error; no more retries left)":"(error; not retryable)"})`,u.status,a,d,m),this.makeStatusError(u.status,b,m,d)}return{response:u,options:n,controller:l}}requestAPIList(e,s){const n=this.makeRequest(s,null);return new uh(this,n,e)}buildURL(e,s){const n=_h(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return Jl(r)||(s={...r,...s}),typeof s=="object"&&s&&!Array.isArray(s)&&(n.search=this.stringifyQuery(s)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([s,n])=>typeof n<"u").map(([s,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(s)}=`;throw new L(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,s,n,r){const{signal:i,...a}=s||{};i&&i.addEventListener("abort",()=>r.abort());const o=setTimeout(()=>r.abort(),n),l={signal:r.signal,...a};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(o)})}shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,n){let r;const i=n==null?void 0:n["retry-after-ms"];if(i){const o=parseFloat(i);Number.isNaN(o)||(r=o)}const a=n==null?void 0:n["retry-after"];if(a&&!r){const o=parseFloat(a);Number.isNaN(o)?r=Date.parse(a)-Date.now():r=o*1e3}if(!(r&&0<=r&&r<60*1e3)){const o=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(s,o)}return await Ys(r),this.makeRequest(e,s-1)}calculateDefaultRetryTimeoutMillis(e,s){const i=s-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ts}`}}class Vl{constructor(e,s,n,r){fn.set(this,void 0),oh(this,fn,e),this.options=r,this.response=s,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new L("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const s={...this.options};if("params"in e&&typeof s.query=="object")s.query={...s.query,...e.params};else if("url"in e){const n=[...Object.entries(s.query||{}),...e.url.searchParams.entries()];for(const[r,i]of n)e.url.searchParams.set(r,i);s.query=void 0,s.path=e.url.toString()}return await lh(this,fn,"f").requestAPIList(this.constructor,s)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(fn=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const s of e.getPaginatedItems())yield s}}class uh extends ir{constructor(e,s,n){super(s,async r=>new n(e,r.response,await Hl(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const s of e)yield s}}const Kl=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,s){const n=s.toString();return e[n.toLowerCase()]||e[n]}}),fh={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},de=t=>typeof t=="object"&&t!==null&&!Jl(t)&&Object.keys(t).every(e=>Gl(fh,e)),dh=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":Ha(Deno.build.os),"X-Stainless-Arch":ja(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":Ha(process.platform),"X-Stainless-Arch":ja(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=hh();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ts,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function hh(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of t){const n=s.exec(navigator.userAgent);if(n){const r=n[1]||0,i=n[2]||0,a=n[3]||0;return{browser:e,version:`${r}.${i}.${a}`}}}return null}const ja=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Ha=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Wa;const ph=()=>Wa??(Wa=dh()),mh=t=>{try{return JSON.parse(t)}catch{return}},gh=/^[a-z][a-z0-9+.-]*:/i,_h=t=>gh.test(t),Ys=t=>new Promise(e=>setTimeout(e,t)),Rr=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new L(`${t} must be an integer`);if(e<0)throw new L(`${t} must be a positive integer`);return e},Xr=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},dn=t=>{var e,s,n,r;if(typeof process<"u")return((e=fs==null?void 0:fs[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(r=(n=(s=Deno.env)==null?void 0:s.get)==null?void 0:n.call(s,t))==null?void 0:r.trim()};function Jl(t){if(!t)return!0;for(const e in t)return!1;return!0}function Gl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Va(t,e){for(const s in e){if(!Gl(e,s))continue;const n=s.toLowerCase();if(!n)continue;const r=e[s];r===null?delete t[n]:r!==void 0&&(t[n]=r)}}const Ka=new Set(["authorization","api-key"]);function It(t,...e){if(typeof process<"u"&&(fs==null?void 0:fs.DEBUG)==="true"){const s=e.map(n=>{if(!n)return n;if(n.headers){const i={...n,headers:{...n.headers}};for(const a in n.headers)Ka.has(a.toLowerCase())&&(i.headers[a]="REDACTED");return i}let r=null;for(const i in n)Ka.has(i.toLowerCase())&&(r??(r={...n}),r[i]="REDACTED");return r??n});console.log(`OpenAI:DEBUG:${t}`,...s)}}const yh=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),bh=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",wh=t=>typeof(t==null?void 0:t.get)=="function",hn=(t,e)=>{var n;const s=e.toLowerCase();if(wh(t)){const r=((n=e[0])==null?void 0:n.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(i,a,o)=>a+o.toUpperCase());for(const i of[e,s,e.toUpperCase(),r]){const a=t.get(i);if(a)return a}}for(const[r,i]of Object.entries(t))if(r.toLowerCase()===s)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i},vh=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),s=e.length,n=new Uint8Array(s);for(let r=0;r<s;r++)n[r]=e.charCodeAt(r);return Array.from(new Float32Array(n.buffer))}};function Er(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class ar extends Vl{constructor(e,s,n,r){super(e,s,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Se extends Vl{constructor(e,s,n,r){super(e,s,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const s=Object.fromEntries(e.url.searchParams);return Object.keys(s).length?s:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const s=(n=e[e.length-1])==null?void 0:n.id;return s?{params:{after:s}}:null}}class K{constructor(e){this._client=e}}let ql=class extends K{list(e,s={},n){return de(s)?this.list(e,{},s):this._client.getAPIList(`/chat/completions/${e}/messages`,xh,{query:s,...n})}},or=class extends K{constructor(){super(...arguments),this.messages=new ql(this._client)}create(e,s){return this._client.post("/chat/completions",{body:e,...s,stream:e.stream??!1})}retrieve(e,s){return this._client.get(`/chat/completions/${e}`,s)}update(e,s,n){return this._client.post(`/chat/completions/${e}`,{body:s,...n})}list(e={},s){return de(e)?this.list({},e):this._client.getAPIList("/chat/completions",lr,{query:e,...s})}del(e,s){return this._client.delete(`/chat/completions/${e}`,s)}};class lr extends Se{}class xh extends Se{}or.ChatCompletionsPage=lr;or.Messages=ql;let cr=class extends K{constructor(){super(...arguments),this.completions=new or(this._client)}};cr.Completions=or;cr.ChatCompletionsPage=lr;class Xl extends K{create(e,s){return this._client.post("/audio/speech",{body:e,...s,headers:{Accept:"application/octet-stream",...s==null?void 0:s.headers},__binaryResponse:!0})}}class Ql extends K{create(e,s){return this._client.post("/audio/transcriptions",ms({body:e,...s,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Yl extends K{create(e,s){return this._client.post("/audio/translations",ms({body:e,...s,__metadata:{model:e.model}}))}}class zs extends K{constructor(){super(...arguments),this.transcriptions=new Ql(this._client),this.translations=new Yl(this._client),this.speech=new Xl(this._client)}}zs.Transcriptions=Ql;zs.Translations=Yl;zs.Speech=Xl;class Pi extends K{create(e,s){return this._client.post("/batches",{body:e,...s})}retrieve(e,s){return this._client.get(`/batches/${e}`,s)}list(e={},s){return de(e)?this.list({},e):this._client.getAPIList("/batches",Ri,{query:e,...s})}cancel(e,s){return this._client.post(`/batches/${e}/cancel`,s)}}class Ri extends Se{}Pi.BatchesPage=Ri;var Xe=function(t,e,s,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s},ue=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},Qr,An,Cn,Ps,Rs,Pn,Es,_t,Is,jn,Hn,ss,zl;class Ei{constructor(){Qr.add(this),this.controller=new AbortController,An.set(this,void 0),Cn.set(this,()=>{}),Ps.set(this,()=>{}),Rs.set(this,void 0),Pn.set(this,()=>{}),Es.set(this,()=>{}),_t.set(this,{}),Is.set(this,!1),jn.set(this,!1),Hn.set(this,!1),ss.set(this,!1),Xe(this,An,new Promise((e,s)=>{Xe(this,Cn,e,"f"),Xe(this,Ps,s,"f")}),"f"),Xe(this,Rs,new Promise((e,s)=>{Xe(this,Pn,e,"f"),Xe(this,Es,s,"f")}),"f"),ue(this,An,"f").catch(()=>{}),ue(this,Rs,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ue(this,Qr,"m",zl).bind(this))},0)}_connected(){this.ended||(ue(this,Cn,"f").call(this),this._emit("connect"))}get ended(){return ue(this,Is,"f")}get errored(){return ue(this,jn,"f")}get aborted(){return ue(this,Hn,"f")}abort(){this.controller.abort()}on(e,s){return(ue(this,_t,"f")[e]||(ue(this,_t,"f")[e]=[])).push({listener:s}),this}off(e,s){const n=ue(this,_t,"f")[e];if(!n)return this;const r=n.findIndex(i=>i.listener===s);return r>=0&&n.splice(r,1),this}once(e,s){return(ue(this,_t,"f")[e]||(ue(this,_t,"f")[e]=[])).push({listener:s,once:!0}),this}emitted(e){return new Promise((s,n)=>{Xe(this,ss,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,s)})}async done(){Xe(this,ss,!0,"f"),await ue(this,Rs,"f")}_emit(e,...s){if(ue(this,Is,"f"))return;e==="end"&&(Xe(this,Is,!0,"f"),ue(this,Pn,"f").call(this));const n=ue(this,_t,"f")[e];if(n&&(ue(this,_t,"f")[e]=n.filter(r=>!r.once),n.forEach(({listener:r})=>r(...s))),e==="abort"){const r=s[0];!ue(this,ss,"f")&&!(n!=null&&n.length)&&Promise.reject(r),ue(this,Ps,"f").call(this,r),ue(this,Es,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=s[0];!ue(this,ss,"f")&&!(n!=null&&n.length)&&Promise.reject(r),ue(this,Ps,"f").call(this,r),ue(this,Es,"f").call(this,r),this._emit("end")}}_emitFinal(){}}An=new WeakMap,Cn=new WeakMap,Ps=new WeakMap,Rs=new WeakMap,Pn=new WeakMap,Es=new WeakMap,_t=new WeakMap,Is=new WeakMap,jn=new WeakMap,Hn=new WeakMap,ss=new WeakMap,Qr=new WeakSet,zl=function(e){if(Xe(this,jn,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Ge),e instanceof Ge)return Xe(this,Hn,!0,"f"),this._emit("abort",e);if(e instanceof L)return this._emit("error",e);if(e instanceof Error){const s=new L(e.message);return s.cause=e,this._emit("error",s)}return this._emit("error",new L(String(e)))};var k=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},Ue=function(t,e,s,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s},ve,Yr,lt,Rn,Qe,Vt,ns,Ht,Wn,We,En,In,Us,Os,$s,Ja,Ga,qa,Xa,Qa,Ya,za;class ze extends Ei{constructor(){super(...arguments),ve.add(this),Yr.set(this,[]),lt.set(this,{}),Rn.set(this,{}),Qe.set(this,void 0),Vt.set(this,void 0),ns.set(this,void 0),Ht.set(this,void 0),Wn.set(this,void 0),We.set(this,void 0),En.set(this,void 0),In.set(this,void 0),Us.set(this,void 0)}[(Yr=new WeakMap,lt=new WeakMap,Rn=new WeakMap,Qe=new WeakMap,Vt=new WeakMap,ns=new WeakMap,Ht=new WeakMap,Wn=new WeakMap,We=new WeakMap,En=new WeakMap,In=new WeakMap,Us=new WeakMap,ve=new WeakSet,Symbol.asyncIterator)](){const e=[],s=[];let n=!1;return this.on("event",r=>{const i=s.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of s)r.resolve(void 0);s.length=0}),this.on("abort",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),this.on("error",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>s.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const s=new ze;return s._run(()=>s._fromReadableStream(e)),s}async _fromReadableStream(e,s){var i;const n=s==null?void 0:s.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=ut.fromReadableStream(e,this.controller);for await(const a of r)k(this,ve,"m",Os).call(this,a);if((i=r.controller.signal)!=null&&i.aborted)throw new Ge;return this._addRun(k(this,ve,"m",$s).call(this))}toReadableStream(){return new ut(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,s,n,r,i){const a=new ze;return a._run(()=>a._runToolAssistantStream(e,s,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,s,n,r,i){var u;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},l=await e.submitToolOutputs(s,n,o,{...i,signal:this.controller.signal});this._connected();for await(const d of l)k(this,ve,"m",Os).call(this,d);if((u=l.controller.signal)!=null&&u.aborted)throw new Ge;return this._addRun(k(this,ve,"m",$s).call(this))}static createThreadAssistantStream(e,s,n){const r=new ze;return r._run(()=>r._threadAssistantStream(e,s,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,s,n,r){const i=new ze;return i._run(()=>i._runAssistantStream(e,s,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return k(this,En,"f")}currentRun(){return k(this,In,"f")}currentMessageSnapshot(){return k(this,Qe,"f")}currentRunStepSnapshot(){return k(this,Us,"f")}async finalRunSteps(){return await this.done(),Object.values(k(this,lt,"f"))}async finalMessages(){return await this.done(),Object.values(k(this,Rn,"f"))}async finalRun(){if(await this.done(),!k(this,Vt,"f"))throw Error("Final run was not received.");return k(this,Vt,"f")}async _createThreadAssistantStream(e,s,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const i={...s,stream:!0},a=await e.createAndRun(i,{...n,signal:this.controller.signal});this._connected();for await(const l of a)k(this,ve,"m",Os).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new Ge;return this._addRun(k(this,ve,"m",$s).call(this))}async _createAssistantStream(e,s,n,r){var l;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},o=await e.create(s,a,{...r,signal:this.controller.signal});this._connected();for await(const u of o)k(this,ve,"m",Os).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new Ge;return this._addRun(k(this,ve,"m",$s).call(this))}static accumulateDelta(e,s){for(const[n,r]of Object.entries(s)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let i=e[n];if(i==null){e[n]=r;continue}if(n==="index"||n==="type"){e[n]=r;continue}if(typeof i=="string"&&typeof r=="string")i+=r;else if(typeof i=="number"&&typeof r=="number")i+=r;else if(Er(i)&&Er(r))i=this.accumulateDelta(i,r);else if(Array.isArray(i)&&Array.isArray(r)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...r);continue}for(const a of r){if(!Er(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=i[o];l==null?i.push(a):i[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${i}`);e[n]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,s,n){return await this._createThreadAssistantStream(s,e,n)}async _runAssistantStream(e,s,n,r){return await this._createAssistantStream(s,e,n,r)}async _runToolAssistantStream(e,s,n,r,i){return await this._createToolAssistantStream(n,e,s,r,i)}}Os=function(e){if(!this.ended)switch(Ue(this,En,e,"f"),k(this,ve,"m",qa).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":k(this,ve,"m",za).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":k(this,ve,"m",Ga).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":k(this,ve,"m",Ja).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},$s=function(){if(this.ended)throw new L("stream has ended, this shouldn't happen");if(!k(this,Vt,"f"))throw Error("Final run has not been received");return k(this,Vt,"f")},Ja=function(e){const[s,n]=k(this,ve,"m",Qa).call(this,e,k(this,Qe,"f"));Ue(this,Qe,s,"f"),k(this,Rn,"f")[s.id]=s;for(const r of n){const i=s.content[r.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,s),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let i=r.text,a=s.content[r.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=k(this,ns,"f")){if(k(this,Ht,"f"))switch(k(this,Ht,"f").type){case"text":this._emit("textDone",k(this,Ht,"f").text,k(this,Qe,"f"));break;case"image_file":this._emit("imageFileDone",k(this,Ht,"f").image_file,k(this,Qe,"f"));break}Ue(this,ns,r.index,"f")}Ue(this,Ht,s.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(k(this,ns,"f")!==void 0){const r=e.data.content[k(this,ns,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,k(this,Qe,"f"));break;case"text":this._emit("textDone",r.text,k(this,Qe,"f"));break}}k(this,Qe,"f")&&this._emit("messageDone",e.data),Ue(this,Qe,void 0,"f")}},Ga=function(e){const s=k(this,ve,"m",Xa).call(this,e);switch(Ue(this,Us,s,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&s.step_details.type=="tool_calls")for(const i of n.step_details.tool_calls)i.index==k(this,Wn,"f")?this._emit("toolCallDelta",i,s.step_details.tool_calls[i.index]):(k(this,We,"f")&&this._emit("toolCallDone",k(this,We,"f")),Ue(this,Wn,i.index,"f"),Ue(this,We,s.step_details.tool_calls[i.index],"f"),k(this,We,"f")&&this._emit("toolCallCreated",k(this,We,"f")));this._emit("runStepDelta",e.data.delta,s);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ue(this,Us,void 0,"f"),e.data.step_details.type=="tool_calls"&&k(this,We,"f")&&(this._emit("toolCallDone",k(this,We,"f")),Ue(this,We,void 0,"f")),this._emit("runStepDone",e.data,s);break}},qa=function(e){k(this,Yr,"f").push(e),this._emit("event",e)},Xa=function(e){switch(e.event){case"thread.run.step.created":return k(this,lt,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let s=k(this,lt,"f")[e.data.id];if(!s)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=ze.accumulateDelta(s,n.delta);k(this,lt,"f")[e.data.id]=r}return k(this,lt,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":k(this,lt,"f")[e.data.id]=e.data;break}if(k(this,lt,"f")[e.data.id])return k(this,lt,"f")[e.data.id];throw new Error("No snapshot available")},Qa=function(e,s){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!s)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const i of r.delta.content)if(i.index in s.content){let a=s.content[i.index];s.content[i.index]=k(this,ve,"m",Ya).call(this,i,a)}else s.content[i.index]=i,n.push(i);return[s,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(s)return[s,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Ya=function(e,s){return ze.accumulateDelta(s,e)},za=function(e){switch(Ue(this,In,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Ue(this,Vt,e.data,"f"),k(this,We,"f")&&(this._emit("toolCallDone",k(this,We,"f")),Ue(this,We,void 0,"f"));break}};class Ii extends K{create(e,s){return this._client.post("/assistants",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,s){return this._client.get(`/assistants/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,s,n){return this._client.post(`/assistants/${e}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},s){return de(e)?this.list({},e):this._client.getAPIList("/assistants",Oi,{query:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}del(e,s){return this._client.delete(`/assistants/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Oi extends Se{}Ii.AssistantsPage=Oi;function Za(t){return typeof t.parse=="function"}const ds=t=>(t==null?void 0:t.role)==="assistant",Zl=t=>(t==null?void 0:t.role)==="function",ec=t=>(t==null?void 0:t.role)==="tool";function $i(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Zs(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Sh(t,e){return!e||!tc(e)?{...t,choices:t.choices.map(s=>({...s,message:{...s.message,parsed:null,...s.message.tool_calls?{tool_calls:s.message.tool_calls}:void 0}}))}:Ti(t,e)}function Ti(t,e){const s=t.choices.map(n=>{var r;if(n.finish_reason==="length")throw new Bl;if(n.finish_reason==="content_filter")throw new Nl;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:((r=n.message.tool_calls)==null?void 0:r.map(i=>Ch(e,i)))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?Ah(e,n.message.content):null}}});return{...t,choices:s}}function Ah(t,e){var s,n;return((s=t.response_format)==null?void 0:s.type)!=="json_schema"?null:((n=t.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Ch(t,e){var n;const s=(n=t.tools)==null?void 0:n.find(r=>{var i;return((i=r.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Zs(s)?s.$parseRaw(e.function.arguments):s!=null&&s.function.strict?JSON.parse(e.function.arguments):null}}}function Ph(t,e){var n;if(!t)return!1;const s=(n=t.tools)==null?void 0:n.find(r=>{var i;return((i=r.function)==null?void 0:i.name)===e.function.name});return Zs(s)||(s==null?void 0:s.function.strict)||!1}function tc(t){var e;return $i(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(s=>Zs(s)||s.type==="function"&&s.function.strict===!0))??!1}function Rh(t){for(const e of t??[]){if(e.type!=="function")throw new L(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new L(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Be=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},Ae,zr,Vn,Zr,ei,ti,sc,si;const eo=10;class nc extends Ei{constructor(){super(...arguments),Ae.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const s=(n=e.choices[0])==null?void 0:n.message;return s&&this._addMessage(s),e}_addMessage(e,s=!0){if("content"in e||(e.content=null),this.messages.push(e),s){if(this._emit("message",e),(Zl(e)||ec(e))&&e.content)this._emit("functionCallResult",e.content);else if(ds(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ds(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new L("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Be(this,Ae,"m",zr).call(this)}async finalMessage(){return await this.done(),Be(this,Ae,"m",Vn).call(this)}async finalFunctionCall(){return await this.done(),Be(this,Ae,"m",Zr).call(this)}async finalFunctionCallResult(){return await this.done(),Be(this,Ae,"m",ei).call(this)}async totalUsage(){return await this.done(),Be(this,Ae,"m",ti).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const s=Be(this,Ae,"m",Vn).call(this);s&&this._emit("finalMessage",s);const n=Be(this,Ae,"m",zr).call(this);n&&this._emit("finalContent",n);const r=Be(this,Ae,"m",Zr).call(this);r&&this._emit("finalFunctionCall",r);const i=Be(this,Ae,"m",ei).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",Be(this,Ae,"m",ti).call(this))}async _createChatCompletion(e,s,n){const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Be(this,Ae,"m",sc).call(this,s);const i=await e.chat.completions.create({...s,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Ti(i,s))}async _runChatCompletion(e,s,n){for(const r of s.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,s,n)}async _runFunctions(e,s,n){var g;const r="function",{function_call:i="auto",stream:a,...o}=s,l=typeof i!="string"&&(i==null?void 0:i.name),{maxChatCompletions:u=eo}=n||{},d={};for(const p of s.functions)d[p.name||p.function.name]=p;const c=s.functions.map(p=>({name:p.name||p.function.name,parameters:p.parameters,description:p.description}));for(const p of s.messages)this._addMessage(p,!1);for(let p=0;p<u;++p){const m=(g=(await this._createChatCompletion(e,{...o,function_call:i,functions:c,messages:[...this.messages]},n)).choices[0])==null?void 0:g.message;if(!m)throw new L("missing message in ChatCompletion response");if(!m.function_call)return;const{name:v,arguments:F}=m.function_call,C=d[v];if(C){if(l&&l!==v){const H=`Invalid function_call: ${JSON.stringify(v)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,name:v,content:H});continue}}else{const H=`Invalid function_call: ${JSON.stringify(v)}. Available options are: ${c.map(P=>JSON.stringify(P.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:v,content:H});continue}let M;try{M=Za(C)?await C.parse(F):F}catch(H){this._addMessage({role:r,name:v,content:H instanceof Error?H.message:String(H)});continue}const A=await C.function(M,this),j=Be(this,Ae,"m",si).call(this,A);if(this._addMessage({role:r,name:v,content:j}),l)return}}async _runTools(e,s,n){var p,b,m;const r="tool",{tool_choice:i="auto",stream:a,...o}=s,l=typeof i!="string"&&((p=i==null?void 0:i.function)==null?void 0:p.name),{maxChatCompletions:u=eo}=n||{},d=s.tools.map(v=>{if(Zs(v)){if(!v.$callback)throw new L("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:v.$callback,name:v.function.name,description:v.function.description||"",parameters:v.function.parameters,parse:v.$parseRaw,strict:!0}}}return v}),c={};for(const v of d)v.type==="function"&&(c[v.function.name||v.function.function.name]=v.function);const g="tools"in s?d.map(v=>v.type==="function"?{type:"function",function:{name:v.function.name||v.function.function.name,parameters:v.function.parameters,description:v.function.description,strict:v.function.strict}}:v):void 0;for(const v of s.messages)this._addMessage(v,!1);for(let v=0;v<u;++v){const C=(b=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:g,messages:[...this.messages]},n)).choices[0])==null?void 0:b.message;if(!C)throw new L("missing message in ChatCompletion response");if(!((m=C.tool_calls)!=null&&m.length))return;for(const M of C.tool_calls){if(M.type!=="function")continue;const A=M.id,{name:j,arguments:H}=M.function,P=c[j];if(P){if(l&&l!==j){const q=`Invalid tool_call: ${JSON.stringify(j)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,tool_call_id:A,content:q});continue}}else{const q=`Invalid tool_call: ${JSON.stringify(j)}. Available options are: ${Object.keys(c).map(J=>JSON.stringify(J)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:A,content:q});continue}let T;try{T=Za(P)?await P.parse(H):H}catch(q){const J=q instanceof Error?q.message:String(q);this._addMessage({role:r,tool_call_id:A,content:J});continue}const Z=await P.function(T,this),X=Be(this,Ae,"m",si).call(this,Z);if(this._addMessage({role:r,tool_call_id:A,content:X}),l)return}}}}Ae=new WeakSet,zr=function(){return Be(this,Ae,"m",Vn).call(this).content??null},Vn=function(){let e=this.messages.length;for(;e-- >0;){const s=this.messages[e];if(ds(s)){const{function_call:n,...r}=s,i={...r,content:s.content??null,refusal:s.refusal??null};return n&&(i.function_call=n),i}}throw new L("stream ended without producing a ChatCompletionMessage with role=assistant")},Zr=function(){var e,s;for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(ds(r)&&(r!=null&&r.function_call))return r.function_call;if(ds(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(s=r.tool_calls.at(-1))==null?void 0:s.function}},ei=function(){for(let e=this.messages.length-1;e>=0;e--){const s=this.messages[e];if(Zl(s)&&s.content!=null||ec(s)&&s.content!=null&&typeof s.content=="string"&&this.messages.some(n=>{var r;return n.role==="assistant"&&((r=n.tool_calls)==null?void 0:r.some(i=>i.type==="function"&&i.id===s.tool_call_id))}))return s.content}},ti=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:s}of this._chatCompletions)s&&(e.completion_tokens+=s.completion_tokens,e.prompt_tokens+=s.prompt_tokens,e.total_tokens+=s.total_tokens);return e},sc=function(e){if(e.n!=null&&e.n>1)throw new L("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},si=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Js extends nc{static runFunctions(e,s,n){const r=new Js,i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,s,i)),r}static runTools(e,s,n){const r=new Js,i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,s,i)),r}_addMessage(e,s=!0){super._addMessage(e,s),ds(e)&&e.content&&this._emit("content",e.content)}}const rc=1,ic=2,ac=4,oc=8,lc=16,cc=32,uc=64,fc=128,dc=256,hc=fc|dc,pc=lc|cc|hc|uc,mc=rc|ic|pc,gc=ac|oc,Eh=mc|gc,be={STR:rc,NUM:ic,ARR:ac,OBJ:oc,NULL:lc,BOOL:cc,NAN:uc,INFINITY:fc,MINUS_INFINITY:dc,INF:hc,SPECIAL:pc,ATOM:mc,COLLECTION:gc,ALL:Eh};class Ih extends Error{}class Oh extends Error{}function $h(t,e=be.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Th(t.trim(),e)}const Th=(t,e)=>{const s=t.length;let n=0;const r=g=>{throw new Ih(`${g} at position ${n}`)},i=g=>{throw new Oh(`${g} at position ${n}`)},a=()=>(c(),n>=s&&r("Unexpected end of input"),t[n]==='"'?o():t[n]==="{"?l():t[n]==="["?u():t.substring(n,n+4)==="null"||be.NULL&e&&s-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||be.BOOL&e&&s-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||be.BOOL&e&&s-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||be.INFINITY&e&&s-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||be.MINUS_INFINITY&e&&1<s-n&&s-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||be.NAN&e&&s-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):d()),o=()=>{const g=n;let p=!1;for(n++;n<s&&(t[n]!=='"'||p&&t[n-1]==="\\");)p=t[n]==="\\"?!p:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(g,++n-Number(p)))}catch(b){i(String(b))}else if(be.STR&e)try{return JSON.parse(t.substring(g,n-Number(p))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},l=()=>{n++,c();const g={};try{for(;t[n]!=="}";){if(c(),n>=s&&be.OBJ&e)return g;const p=o();c(),n++;try{const b=a();Object.defineProperty(g,p,{value:b,writable:!0,enumerable:!0,configurable:!0})}catch(b){if(be.OBJ&e)return g;throw b}c(),t[n]===","&&n++}}catch{if(be.OBJ&e)return g;r("Expected '}' at end of object")}return n++,g},u=()=>{n++;const g=[];try{for(;t[n]!=="]";)g.push(a()),c(),t[n]===","&&n++}catch{if(be.ARR&e)return g;r("Expected ']' at end of array")}return n++,g},d=()=>{if(n===0){t==="-"&&be.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(be.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(p))}}const g=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==s&&!(be.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(g,n))}catch{t.substring(g,n)==="-"&&be.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(b){i(String(b))}}},c=()=>{for(;n<s&&` 
\r	`.includes(t[n]);)n++};return a()},to=t=>$h(t,be.ALL^be.NUM);var Qt=function(t,e,s,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s},ne=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},me,gt,Yt,xt,Ir,pn,Or,$r,Tr,mn,Fr,so;class Gs extends nc{constructor(e){super(),me.add(this),gt.set(this,void 0),Yt.set(this,void 0),xt.set(this,void 0),Qt(this,gt,e,"f"),Qt(this,Yt,[],"f")}get currentChatCompletionSnapshot(){return ne(this,xt,"f")}static fromReadableStream(e){const s=new Gs(null);return s._run(()=>s._fromReadableStream(e)),s}static createChatCompletion(e,s,n){const r=new Gs(s);return r._run(()=>r._runChatCompletion(e,{...s,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,s,n){var a;super._createChatCompletion;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ne(this,me,"m",Ir).call(this);const i=await e.chat.completions.create({...s,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of i)ne(this,me,"m",Or).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new Ge;return this._addChatCompletion(ne(this,me,"m",mn).call(this))}async _fromReadableStream(e,s){var a;const n=s==null?void 0:s.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),ne(this,me,"m",Ir).call(this),this._connected();const r=ut.fromReadableStream(e,this.controller);let i;for await(const o of r)i&&i!==o.id&&this._addChatCompletion(ne(this,me,"m",mn).call(this)),ne(this,me,"m",Or).call(this,o),i=o.id;if((a=r.controller.signal)!=null&&a.aborted)throw new Ge;return this._addChatCompletion(ne(this,me,"m",mn).call(this))}[(gt=new WeakMap,Yt=new WeakMap,xt=new WeakMap,me=new WeakSet,Ir=function(){this.ended||Qt(this,xt,void 0,"f")},pn=function(s){let n=ne(this,Yt,"f")[s.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ne(this,Yt,"f")[s.index]=n,n)},Or=function(s){var r,i,a,o,l,u,d,c,g,p,b,m,v,F,C;if(this.ended)return;const n=ne(this,me,"m",so).call(this,s);this._emit("chunk",s,n);for(const M of s.choices){const A=n.choices[M.index];M.delta.content!=null&&((r=A.message)==null?void 0:r.role)==="assistant"&&((i=A.message)!=null&&i.content)&&(this._emit("content",M.delta.content,A.message.content),this._emit("content.delta",{delta:M.delta.content,snapshot:A.message.content,parsed:A.message.parsed})),M.delta.refusal!=null&&((a=A.message)==null?void 0:a.role)==="assistant"&&((o=A.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:M.delta.refusal,snapshot:A.message.refusal}),((l=M.logprobs)==null?void 0:l.content)!=null&&((u=A.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=M.logprobs)==null?void 0:d.content,snapshot:((c=A.logprobs)==null?void 0:c.content)??[]}),((g=M.logprobs)==null?void 0:g.refusal)!=null&&((p=A.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(b=M.logprobs)==null?void 0:b.refusal,snapshot:((m=A.logprobs)==null?void 0:m.refusal)??[]});const j=ne(this,me,"m",pn).call(this,A);A.finish_reason&&(ne(this,me,"m",Tr).call(this,A),j.current_tool_call_index!=null&&ne(this,me,"m",$r).call(this,A,j.current_tool_call_index));for(const H of M.delta.tool_calls??[])j.current_tool_call_index!==H.index&&(ne(this,me,"m",Tr).call(this,A),j.current_tool_call_index!=null&&ne(this,me,"m",$r).call(this,A,j.current_tool_call_index)),j.current_tool_call_index=H.index;for(const H of M.delta.tool_calls??[]){const P=(v=A.message.tool_calls)==null?void 0:v[H.index];P!=null&&P.type&&((P==null?void 0:P.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(F=P.function)==null?void 0:F.name,index:H.index,arguments:P.function.arguments,parsed_arguments:P.function.parsed_arguments,arguments_delta:((C=H.function)==null?void 0:C.arguments)??""}):(P==null||P.type,void 0))}}},$r=function(s,n){var a,o,l;if(ne(this,me,"m",pn).call(this,s).done_tool_calls.has(n))return;const i=(a=s.message.tool_calls)==null?void 0:a[n];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const u=(l=(o=ne(this,gt,"f"))==null?void 0:o.tools)==null?void 0:l.find(d=>d.type==="function"&&d.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:n,arguments:i.function.arguments,parsed_arguments:Zs(u)?u.$parseRaw(i.function.arguments):u!=null&&u.function.strict?JSON.parse(i.function.arguments):null})}else i.type},Tr=function(s){var r,i;const n=ne(this,me,"m",pn).call(this,s);if(s.message.content&&!n.content_done){n.content_done=!0;const a=ne(this,me,"m",Fr).call(this);this._emit("content.done",{content:s.message.content,parsed:a?a.$parseRaw(s.message.content):null})}s.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:s.message.refusal})),(r=s.logprobs)!=null&&r.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:s.logprobs.content})),(i=s.logprobs)!=null&&i.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:s.logprobs.refusal}))},mn=function(){if(this.ended)throw new L("stream has ended, this shouldn't happen");const s=ne(this,xt,"f");if(!s)throw new L("request ended without sending any chunks");return Qt(this,xt,void 0,"f"),Qt(this,Yt,[],"f"),Fh(s,ne(this,gt,"f"))},Fr=function(){var n;const s=(n=ne(this,gt,"f"))==null?void 0:n.response_format;return $i(s)?s:null},so=function(s){var n,r,i,a;let o=ne(this,xt,"f");const{choices:l,...u}=s;o?Object.assign(o,u):o=Qt(this,xt,{...u,choices:[]},"f");for(const{delta:d,finish_reason:c,index:g,logprobs:p=null,...b}of s.choices){let m=o.choices[g];if(m||(m=o.choices[g]={finish_reason:c,index:g,message:{},logprobs:p,...b}),p)if(!m.logprobs)m.logprobs=Object.assign({},p);else{const{content:H,refusal:P,...T}=p;Object.assign(m.logprobs,T),H&&((n=m.logprobs).content??(n.content=[]),m.logprobs.content.push(...H)),P&&((r=m.logprobs).refusal??(r.refusal=[]),m.logprobs.refusal.push(...P))}if(c&&(m.finish_reason=c,ne(this,gt,"f")&&tc(ne(this,gt,"f")))){if(c==="length")throw new Bl;if(c==="content_filter")throw new Nl}if(Object.assign(m,b),!d)continue;const{content:v,refusal:F,function_call:C,role:M,tool_calls:A,...j}=d;if(Object.assign(m.message,j),F&&(m.message.refusal=(m.message.refusal||"")+F),M&&(m.message.role=M),C&&(m.message.function_call?(C.name&&(m.message.function_call.name=C.name),C.arguments&&((i=m.message.function_call).arguments??(i.arguments=""),m.message.function_call.arguments+=C.arguments)):m.message.function_call=C),v&&(m.message.content=(m.message.content||"")+v,!m.message.refusal&&ne(this,me,"m",Fr).call(this)&&(m.message.parsed=to(m.message.content))),A){m.message.tool_calls||(m.message.tool_calls=[]);for(const{index:H,id:P,type:T,function:Z,...X}of A){const q=(a=m.message.tool_calls)[H]??(a[H]={});Object.assign(q,X),P&&(q.id=P),T&&(q.type=T),Z&&(q.function??(q.function={name:Z.name??"",arguments:""})),Z!=null&&Z.name&&(q.function.name=Z.name),Z!=null&&Z.arguments&&(q.function.arguments+=Z.arguments,Ph(ne(this,gt,"f"),q)&&(q.function.parsed_arguments=to(q.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],s=[];let n=!1;return this.on("chunk",r=>{const i=s.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of s)r.resolve(void 0);s.length=0}),this.on("abort",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),this.on("error",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>s.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ut(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Fh(t,e){const{id:s,choices:n,created:r,model:i,system_fingerprint:a,...o}=t,l={...o,id:s,choices:n.map(({message:u,finish_reason:d,index:c,logprobs:g,...p})=>{if(!d)throw new L(`missing finish_reason for choice ${c}`);const{content:b=null,function_call:m,tool_calls:v,...F}=u,C=u.role;if(!C)throw new L(`missing role for choice ${c}`);if(m){const{arguments:M,name:A}=m;if(M==null)throw new L(`missing function_call.arguments for choice ${c}`);if(!A)throw new L(`missing function_call.name for choice ${c}`);return{...p,message:{content:b,function_call:{arguments:M,name:A},role:C,refusal:u.refusal??null},finish_reason:d,index:c,logprobs:g}}return v?{...p,index:c,finish_reason:d,logprobs:g,message:{...F,role:C,content:b,refusal:u.refusal??null,tool_calls:v.map((M,A)=>{const{function:j,type:H,id:P,...T}=M,{arguments:Z,name:X,...q}=j||{};if(P==null)throw new L(`missing choices[${c}].tool_calls[${A}].id
${gn(t)}`);if(H==null)throw new L(`missing choices[${c}].tool_calls[${A}].type
${gn(t)}`);if(X==null)throw new L(`missing choices[${c}].tool_calls[${A}].function.name
${gn(t)}`);if(Z==null)throw new L(`missing choices[${c}].tool_calls[${A}].function.arguments
${gn(t)}`);return{...T,id:P,type:H,function:{...q,name:X,arguments:Z}}})}}:{...p,message:{...F,content:b,role:C,refusal:u.refusal??null},finish_reason:d,index:c,logprobs:g}}),created:r,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return Sh(l,e)}function gn(t){return JSON.stringify(t)}class hs extends Gs{static fromReadableStream(e){const s=new hs(null);return s._run(()=>s._fromReadableStream(e)),s}static runFunctions(e,s,n){const r=new hs(null),i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,s,i)),r}static runTools(e,s,n){const r=new hs(s),i={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,s,i)),r}}let _c=class extends K{parse(e,s){return Rh(e.tools),this._client.chat.completions.create(e,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>Ti(n,e))}runFunctions(e,s){return e.stream?hs.runFunctions(this._client,e,s):Js.runFunctions(this._client,e,s)}runTools(e,s){return e.stream?hs.runTools(this._client,e,s):Js.runTools(this._client,e,s)}stream(e,s){return Gs.createChatCompletion(this._client,e,s)}};class ni extends K{constructor(){super(...arguments),this.completions=new _c(this._client)}}(function(t){t.Completions=_c})(ni||(ni={}));class yc extends K{create(e,s){return this._client.post("/realtime/sessions",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class bc extends K{create(e,s){return this._client.post("/realtime/transcription_sessions",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class ur extends K{constructor(){super(...arguments),this.sessions=new yc(this._client),this.transcriptionSessions=new bc(this._client)}}ur.Sessions=yc;ur.TranscriptionSessions=bc;class Fi extends K{create(e,s,n){return this._client.post(`/threads/${e}/messages`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,s,n){return this._client.get(`/threads/${e}/messages/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,s,n,r){return this._client.post(`/threads/${e}/messages/${s}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,s={},n){return de(s)?this.list(e,{},s):this._client.getAPIList(`/threads/${e}/messages`,Mi,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,s,n){return this._client.delete(`/threads/${e}/messages/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Mi extends Se{}Fi.MessagesPage=Mi;class ki extends K{retrieve(e,s,n,r={},i){return de(r)?this.retrieve(e,s,n,{},r):this._client.get(`/threads/${e}/runs/${s}/steps/${n}`,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,s,n={},r){return de(n)?this.list(e,s,{},n):this._client.getAPIList(`/threads/${e}/runs/${s}/steps`,Bi,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Bi extends Se{}ki.RunStepsPage=Bi;let en=class extends K{constructor(){super(...arguments),this.steps=new ki(this._client)}create(e,s,n){const{include:r,...i}=s;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:i,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:s.stream??!1})}retrieve(e,s,n){return this._client.get(`/threads/${e}/runs/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,s,n,r){return this._client.post(`/threads/${e}/runs/${s}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,s={},n){return de(s)?this.list(e,{},s):this._client.getAPIList(`/threads/${e}/runs`,Ni,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,s,n){return this._client.post(`/threads/${e}/runs/${s}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,s,n){const r=await this.create(e,s,n);return await this.poll(e,r.id,n)}createAndStream(e,s,n){return ze.createAssistantStream(e,this._client.beta.threads.runs,s,n)}async poll(e,s,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:i,response:a}=await this.retrieve(e,s,{...n,headers:{...n==null?void 0:n.headers,...r}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Ys(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,s,n){return ze.createAssistantStream(e,this._client.beta.threads.runs,s,n)}submitToolOutputs(e,s,n,r){return this._client.post(`/threads/${e}/runs/${s}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,s,n,r){const i=await this.submitToolOutputs(e,s,n,r);return await this.poll(e,i.id,r)}submitToolOutputsStream(e,s,n,r){return ze.createToolAssistantStream(e,s,this._client.beta.threads.runs,n,r)}};class Ni extends Se{}en.RunsPage=Ni;en.Steps=ki;en.RunStepsPage=Bi;class gs extends K{constructor(){super(...arguments),this.runs=new en(this._client),this.messages=new Fi(this._client)}create(e={},s){return de(e)?this.create({},e):this._client.post("/threads",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,s){return this._client.get(`/threads/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,s,n){return this._client.post(`/threads/${e}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,s){return this._client.delete(`/threads/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}createAndRun(e,s){return this._client.post("/threads/runs",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:e.stream??!1})}async createAndRunPoll(e,s){const n=await this.createAndRun(e,s);return await this.runs.poll(n.thread_id,n.id,s)}createAndRunStream(e,s){return ze.createThreadAssistantStream(e,this._client.beta.threads,s)}}gs.Runs=en;gs.RunsPage=Ni;gs.Messages=Fi;gs.MessagesPage=Mi;class _s extends K{constructor(){super(...arguments),this.realtime=new ur(this._client),this.chat=new ni(this._client),this.assistants=new Ii(this._client),this.threads=new gs(this._client)}}_s.Realtime=ur;_s.Assistants=Ii;_s.AssistantsPage=Oi;_s.Threads=gs;class wc extends K{create(e,s){return this._client.post("/completions",{body:e,...s,stream:e.stream??!1})}}class vc extends K{create(e,s){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&It("Request","User defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:r},...s});return n?i:(It("response","Decoding base64 embeddings to float32 array"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=vh(l)}),a)))}}class Li extends K{retrieve(e,s,n,r){return this._client.get(`/evals/${e}/runs/${s}/output_items/${n}`,r)}list(e,s,n={},r){return de(n)?this.list(e,s,{},n):this._client.getAPIList(`/evals/${e}/runs/${s}/output_items`,Di,{query:n,...r})}}class Di extends Se{}Li.OutputItemListResponsesPage=Di;class tn extends K{constructor(){super(...arguments),this.outputItems=new Li(this._client)}create(e,s,n){return this._client.post(`/evals/${e}/runs`,{body:s,...n})}retrieve(e,s,n){return this._client.get(`/evals/${e}/runs/${s}`,n)}list(e,s={},n){return de(s)?this.list(e,{},s):this._client.getAPIList(`/evals/${e}/runs`,Ui,{query:s,...n})}del(e,s,n){return this._client.delete(`/evals/${e}/runs/${s}`,n)}cancel(e,s,n){return this._client.post(`/evals/${e}/runs/${s}`,n)}}class Ui extends Se{}tn.RunListResponsesPage=Ui;tn.OutputItems=Li;tn.OutputItemListResponsesPage=Di;class sn extends K{constructor(){super(...arguments),this.runs=new tn(this._client)}create(e,s){return this._client.post("/evals",{body:e,...s})}retrieve(e,s){return this._client.get(`/evals/${e}`,s)}update(e,s,n){return this._client.post(`/evals/${e}`,{body:s,...n})}list(e={},s){return de(e)?this.list({},e):this._client.getAPIList("/evals",ji,{query:e,...s})}del(e,s){return this._client.delete(`/evals/${e}`,s)}}class ji extends Se{}sn.EvalListResponsesPage=ji;sn.Runs=tn;sn.RunListResponsesPage=Ui;let Hi=class extends K{create(e,s){return this._client.post("/files",ms({body:e,...s}))}retrieve(e,s){return this._client.get(`/files/${e}`,s)}list(e={},s){return de(e)?this.list({},e):this._client.getAPIList("/files",Wi,{query:e,...s})}del(e,s){return this._client.delete(`/files/${e}`,s)}content(e,s){return this._client.get(`/files/${e}/content`,{...s,headers:{Accept:"application/binary",...s==null?void 0:s.headers},__binaryResponse:!0})}retrieveContent(e,s){return this._client.get(`/files/${e}/content`,s)}async waitForProcessing(e,{pollInterval:s=5e3,maxWait:n=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!r.has(a.status);)if(await Ys(s),a=await this.retrieve(e),Date.now()-i>n)throw new Ci({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}};class Wi extends Se{}Hi.FileObjectsPage=Wi;class Vi extends K{create(e,s,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Ki,{body:s,method:"post",...n})}retrieve(e,s={},n){return de(s)?this.retrieve(e,{},s):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:s,...n})}del(e,s,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${s}`,n)}}class Ki extends ar{}Vi.PermissionCreateResponsesPage=Ki;let fr=class extends K{constructor(){super(...arguments),this.permissions=new Vi(this._client)}};fr.Permissions=Vi;fr.PermissionCreateResponsesPage=Ki;class Ji extends K{list(e,s={},n){return de(s)?this.list(e,{},s):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Gi,{query:s,...n})}}class Gi extends Se{}Ji.FineTuningJobCheckpointsPage=Gi;class ys extends K{constructor(){super(...arguments),this.checkpoints=new Ji(this._client)}create(e,s){return this._client.post("/fine_tuning/jobs",{body:e,...s})}retrieve(e,s){return this._client.get(`/fine_tuning/jobs/${e}`,s)}list(e={},s){return de(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",qi,{query:e,...s})}cancel(e,s){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,s)}listEvents(e,s={},n){return de(s)?this.listEvents(e,{},s):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Xi,{query:s,...n})}}class qi extends Se{}class Xi extends Se{}ys.FineTuningJobsPage=qi;ys.FineTuningJobEventsPage=Xi;ys.Checkpoints=Ji;ys.FineTuningJobCheckpointsPage=Gi;class bs extends K{constructor(){super(...arguments),this.jobs=new ys(this._client),this.checkpoints=new fr(this._client)}}bs.Jobs=ys;bs.FineTuningJobsPage=qi;bs.FineTuningJobEventsPage=Xi;bs.Checkpoints=fr;class xc extends K{createVariation(e,s){return this._client.post("/images/variations",ms({body:e,...s}))}edit(e,s){return this._client.post("/images/edits",ms({body:e,...s}))}generate(e,s){return this._client.post("/images/generations",{body:e,...s})}}class Qi extends K{retrieve(e,s){return this._client.get(`/models/${e}`,s)}list(e){return this._client.getAPIList("/models",Yi,e)}del(e,s){return this._client.delete(`/models/${e}`,s)}}class Yi extends ar{}Qi.ModelsPage=Yi;class Sc extends K{create(e,s){return this._client.post("/moderations",{body:e,...s})}}function Mh(t,e){return!e||!Bh(e)?{...t,output_parsed:null,output:t.output.map(s=>s.type==="function_call"?{...s,parsed_arguments:null}:s.type==="message"?{...s,content:s.content.map(n=>({...n,parsed:null}))}:s)}:Ac(t,e)}function Ac(t,e){const s=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:Dh(e,r)};if(r.type==="message"){const i=r.content.map(a=>a.type==="output_text"?{...a,parsed:kh(e,a.text)}:a);return{...r,content:i}}return r}),n=Object.assign({},t,{output:s});return Object.getOwnPropertyDescriptor(t,"output_text")||Cc(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const r of n.output)if(r.type==="message"){for(const i of r.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),n}function kh(t,e){var s,n,r,i;return((n=(s=t.text)==null?void 0:s.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((r=t.text)==null?void 0:r.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function Bh(t){var e;return!!$i((e=t.text)==null?void 0:e.format)}function Nh(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Lh(t,e){return t.find(s=>s.type==="function"&&s.name===e)}function Dh(t,e){const s=Lh(t.tools??[],e.name);return{...e,...e,parsed_arguments:Nh(s)?s.$parseRaw(e.arguments):s!=null&&s.strict?JSON.parse(e.arguments):null}}function Cc(t){const e=[];for(const s of t.output)if(s.type==="message")for(const n of s.content)n.type==="output_text"&&e.push(n.text);t.output_text=e.join("")}class Pc extends K{list(e,s={},n){return de(s)?this.list(e,{},s):this._client.getAPIList(`/responses/${e}/input_items`,jh,{query:s,...n})}}var zt=function(t,e,s,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s},St=function(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)},Zt,_n,At,yn,no,ro,io,ao;class zi extends Ei{constructor(e){super(),Zt.add(this),_n.set(this,void 0),At.set(this,void 0),yn.set(this,void 0),zt(this,_n,e,"f")}static createResponse(e,s,n){const r=new zi(s);return r._run(()=>r._createResponse(e,s,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createResponse(e,s,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),St(this,Zt,"m",no).call(this);const i=await e.responses.create({...s,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of i)St(this,Zt,"m",ro).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new Ge;return St(this,Zt,"m",io).call(this)}[(_n=new WeakMap,At=new WeakMap,yn=new WeakMap,Zt=new WeakSet,no=function(){this.ended||zt(this,At,void 0,"f")},ro=function(s){if(this.ended)return;const n=St(this,Zt,"m",ao).call(this,s);switch(this._emit("event",s),s.type){case"response.output_text.delta":{const r=n.output[s.output_index];if(!r)throw new L(`missing output at index ${s.output_index}`);if(r.type==="message"){const i=r.content[s.content_index];if(!i)throw new L(`missing content at index ${s.content_index}`);if(i.type!=="output_text")throw new L(`expected content to be 'output_text', got ${i.type}`);this._emit("response.output_text.delta",{...s,snapshot:i.text})}break}case"response.function_call_arguments.delta":{const r=n.output[s.output_index];if(!r)throw new L(`missing output at index ${s.output_index}`);r.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...s,snapshot:r.arguments});break}default:this._emit(s.type,s);break}},io=function(){if(this.ended)throw new L("stream has ended, this shouldn't happen");const s=St(this,At,"f");if(!s)throw new L("request ended without sending any events");zt(this,At,void 0,"f");const n=Uh(s,St(this,_n,"f"));return zt(this,yn,n,"f"),n},ao=function(s){let n=St(this,At,"f");if(!n){if(s.type!=="response.created")throw new L(`When snapshot hasn't been set yet, expected 'response.created' event, got ${s.type}`);return n=zt(this,At,s.response,"f"),n}switch(s.type){case"response.output_item.added":{n.output.push(s.item);break}case"response.content_part.added":{const r=n.output[s.output_index];if(!r)throw new L(`missing output at index ${s.output_index}`);r.type==="message"&&r.content.push(s.part);break}case"response.output_text.delta":{const r=n.output[s.output_index];if(!r)throw new L(`missing output at index ${s.output_index}`);if(r.type==="message"){const i=r.content[s.content_index];if(!i)throw new L(`missing content at index ${s.content_index}`);if(i.type!=="output_text")throw new L(`expected content to be 'output_text', got ${i.type}`);i.text+=s.delta}break}case"response.function_call_arguments.delta":{const r=n.output[s.output_index];if(!r)throw new L(`missing output at index ${s.output_index}`);r.type==="function_call"&&(r.arguments+=s.delta);break}case"response.completed":{zt(this,At,s.response,"f");break}}return n},Symbol.asyncIterator)](){const e=[],s=[];let n=!1;return this.on("event",r=>{const i=s.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of s)r.resolve(void 0);s.length=0}),this.on("abort",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),this.on("error",r=>{n=!0;for(const i of s)i.reject(r);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((i,a)=>s.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=St(this,yn,"f");if(!e)throw new L("stream ended without producing a ChatCompletion");return e}}function Uh(t,e){return Mh(t,e)}class Zi extends K{constructor(){super(...arguments),this.inputItems=new Pc(this._client)}create(e,s){return this._client.post("/responses",{body:e,...s,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&Cc(n),n))}retrieve(e,s={},n){return de(s)?this.retrieve(e,{},s):this._client.get(`/responses/${e}`,{query:s,...n})}del(e,s){return this._client.delete(`/responses/${e}`,{...s,headers:{Accept:"*/*",...s==null?void 0:s.headers}})}parse(e,s){return this._client.responses.create(e,s)._thenUnwrap(n=>Ac(n,e))}stream(e,s){return zi.createResponse(this._client,e,s)}}class jh extends Se{}Zi.InputItems=Pc;class Rc extends K{create(e,s,n){return this._client.post(`/uploads/${e}/parts`,ms({body:s,...n}))}}class ea extends K{constructor(){super(...arguments),this.parts=new Rc(this._client)}create(e,s){return this._client.post("/uploads",{body:e,...s})}cancel(e,s){return this._client.post(`/uploads/${e}/cancel`,s)}complete(e,s,n){return this._client.post(`/uploads/${e}/complete`,{body:s,...n})}}ea.Parts=Rc;const Hh=async t=>{const e=await Promise.allSettled(t),s=e.filter(r=>r.status==="rejected");if(s.length){for(const r of s)console.error(r.reason);throw new Error(`${s.length} promise(s) failed - see the above errors`)}const n=[];for(const r of e)r.status==="fulfilled"&&n.push(r.value);return n};class dr extends K{create(e,s,n){return this._client.post(`/vector_stores/${e}/files`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,s,n){return this._client.get(`/vector_stores/${e}/files/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,s,n,r){return this._client.post(`/vector_stores/${e}/files/${s}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,s={},n){return de(s)?this.list(e,{},s):this._client.getAPIList(`/vector_stores/${e}/files`,hr,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,s,n){return this._client.delete(`/vector_stores/${e}/files/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,s,n){const r=await this.create(e,s,n);return await this.poll(e,r.id,n)}async poll(e,s,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const i=await this.retrieve(e,s,{...n,headers:r}).withResponse(),a=i.data;switch(a.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=i.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Ys(o);break;case"failed":case"completed":return a}}}async upload(e,s,n){const r=await this._client.files.create({file:s,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,s,n){const r=await this.upload(e,s,n);return await this.poll(e,r.id,n)}content(e,s,n){return this._client.getAPIList(`/vector_stores/${e}/files/${s}/content`,ta,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class hr extends Se{}class ta extends ar{}dr.VectorStoreFilesPage=hr;dr.FileContentResponsesPage=ta;class Ec extends K{create(e,s,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,s,n){return this._client.get(`/vector_stores/${e}/file_batches/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,s,n){return this._client.post(`/vector_stores/${e}/file_batches/${s}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,s,n){const r=await this.create(e,s);return await this.poll(e,r.id,n)}listFiles(e,s,n={},r){return de(n)?this.listFiles(e,s,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${s}/files`,hr,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async poll(e,s,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:i,response:a}=await this.retrieve(e,s,{...n,headers:r}).withResponse();switch(i.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await Ys(o);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:s,fileIds:n=[]},r){if(s==null||s.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(r==null?void 0:r.maxConcurrency)??5,a=Math.min(i,s.length),o=this._client,l=s.values(),u=[...n];async function d(g){for(let p of g){const b=await o.files.create({file:p,purpose:"assistants"},r);u.push(b.id)}}const c=Array(a).fill(l).map(d);return await Hh(c),await this.createAndPoll(e,{file_ids:u})}}class Ft extends K{constructor(){super(...arguments),this.files=new dr(this._client),this.fileBatches=new Ec(this._client)}create(e,s){return this._client.post("/vector_stores",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,s){return this._client.get(`/vector_stores/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,s,n){return this._client.post(`/vector_stores/${e}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},s){return de(e)?this.list({},e):this._client.getAPIList("/vector_stores",sa,{query:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}del(e,s){return this._client.delete(`/vector_stores/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}search(e,s,n){return this._client.getAPIList(`/vector_stores/${e}/search`,na,{body:s,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class sa extends Se{}class na extends ar{}Ft.VectorStoresPage=sa;Ft.VectorStoreSearchResponsesPage=na;Ft.Files=dr;Ft.VectorStoreFilesPage=hr;Ft.FileContentResponsesPage=ta;Ft.FileBatches=Ec;var Ic;class V extends ch{constructor({baseURL:e=dn("OPENAI_BASE_URL"),apiKey:s=dn("OPENAI_API_KEY"),organization:n=dn("OPENAI_ORG_ID")??null,project:r=dn("OPENAI_PROJECT_ID")??null,...i}={}){if(s===void 0)throw new L("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:s,organization:n,project:r,...i,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&bh())throw new L(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new wc(this),this.chat=new cr(this),this.embeddings=new vc(this),this.files=new Hi(this),this.images=new xc(this),this.audio=new zs(this),this.moderations=new Sc(this),this.models=new Qi(this),this.fineTuning=new bs(this),this.vectorStores=new Ft(this),this.beta=new _s(this),this.batches=new Pi(this),this.uploads=new ea(this),this.responses=new Zi(this),this.evals=new sn(this),this._options=a,this.apiKey=s,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Kd(e,{arrayFormat:"brackets"})}}Ic=V;V.OpenAI=Ic;V.DEFAULT_TIMEOUT=6e5;V.OpenAIError=L;V.APIError=xe;V.APIConnectionError=sr;V.APIConnectionTimeoutError=Ci;V.APIUserAbortError=Ge;V.NotFoundError=$l;V.ConflictError=Tl;V.RateLimitError=Ml;V.BadRequestError=El;V.AuthenticationError=Il;V.InternalServerError=kl;V.PermissionDeniedError=Ol;V.UnprocessableEntityError=Fl;V.toFile=jl;V.fileFromPath=Cl;V.Completions=wc;V.Chat=cr;V.ChatCompletionsPage=lr;V.Embeddings=vc;V.Files=Hi;V.FileObjectsPage=Wi;V.Images=xc;V.Audio=zs;V.Moderations=Sc;V.Models=Qi;V.ModelsPage=Yi;V.FineTuning=bs;V.VectorStores=Ft;V.VectorStoresPage=sa;V.VectorStoreSearchResponsesPage=na;V.Beta=_s;V.Batches=Pi;V.BatchesPage=Ri;V.Uploads=ea;V.Responses=Zi;V.Evals=sn;V.EvalListResponsesPage=ji;const Wh=new V({apiKey:xi(),dangerouslyAllowBrowser:!0}),Vh=`You are a professional Texas Hold'em poker assistant built for real-time use at live or online tables. Your goal is to provide quick, clear action recommendations for each hand scenario.

For each input, calculate and report the estimated win rate and expected value (EV) for each possible action (fold, call, raise, etc). Then clearly recommend the best action based on GTO strategy and professional-level exploitative adjustments when appropriate.

Do not explain in long paragraphs. Keep your answer concise, structured, and focused on actionable advice. If the input lacks key information, ask a short clarification question. Always return your recommendation in the following format:
All your response should be in Traditional Chinese.
---
**Hero's Action Options:**

- **Fold**: Win rate ~X%, EV = Y bb  
- **Call**: Win rate ~X%, EV = Y bb  
- **Check**: Win rate ~X%, EV = Y bb  
- **Raise to Z bb**: Win rate ~X%, EV = Y bb

**Recommended Action**: [Best Action Here]
**Reason**: [Reason Here]
---

Assume players have 50bb stacks unless otherwise stated. Use standard poker terminology. You are allowed to estimate if necessary, based on common poker knowledge.`,Kh=t=>{const{players:e,pot:s,bigBlind:n,handCards:r,communityCards:i,actionHistory:a}=t,o=()=>{let u="";return Object.entries(a).forEach(([d,c])=>{c.length>0&&(u+=`
Stage ${d}：
`,[...c].sort((p,b)=>new Date(p.timestamp)-new Date(b.timestamp)).forEach(p=>{const b=e.find(v=>v.id===p.playerId);if(!b)return;let m=`${b.name} (${p.position}): ${p.action}`;p.action===Ce.CALL?m+=` ${p.raiseAmount}BB`:p.action===Ce.RAISE?m+=` ${p.raiseAmount}BB`:p.action===Ce.SMALL_BLIND?m+=` ${p.raiseAmount}BB`:p.action===Ce.BIG_BLIND&&(m+=` ${p.raiseAmount}BB`),u+=m+`
`}))}),u},l=()=>{const u=[];return i.flop.length>0&&u.push(`翻牌：${i.flop.join(" ")}`),i.turn&&u.push(`轉牌：${i.turn}`),i.river&&u.push(`河牌：${i.river}`),u.join(`
`)};return`你是一個專業的德州撲克玩家，請根據以下牌局資訊提供建議：

${o()}

底池：${s}BB
大盲注：${n}BB

Hero 位置：${t.heroPosition}
Hero 籌碼：${t.heroStack}BB
當前階段：${t.currentStage}

Hero 手牌：${r.join(" ")}
${l()}

---
現在輪到 Hero 行動，請你根據以上資訊回覆最佳策略：
`},Jh=async t=>{try{if(!xi())throw new Error("請先設定 API Key");const s=localStorage.getItem("apiModel")||"gpt-3.5-turbo",n=Kh(t);return console.log(n),(await Wh.responses.create({model:s,instructions:Vh,input:n})).output_text}catch(e){throw console.error("獲取建議時發生錯誤:",e),e}},Gh={class:"game-play"},qh={class:"game-content"},Xh={class:"players-section"},Qh={class:"players-list"},Yh={class:"game-state-section"},zh={class:"game-state"},Zh={class:"game-info"},ep={class:"pot-info"},tp={class:"value"},sp={class:"stage-info"},np={class:"value"},rp={class:"input-group"},ip={class:"cards-matrix"},ap=["onClick"],op={key:0,class:"selected-cards"},lp={class:"input-group"},cp={class:"community-cards"},up={class:"flop-cards"},fp={key:0,class:"flop-display"},dp={key:1,class:"cards-matrix"},hp=["onClick"],pp={class:"turn-river-cards"},mp=["value"],gp=["value"],_p={key:0,class:"advice"},yp=["innerHTML"],bp={__name:"GamePlay",props:{gameConfig:{type:Object,required:!0},gameState:{type:Object,required:!0}},setup(t){const e=t,s=["A♠","K♠","Q♠","J♠","10♠","9♠","8♠","7♠","6♠","5♠","4♠","3♠","2♠","A♥","K♥","Q♥","J♥","10♥","9♥","8♥","7♥","6♥","5♥","4♥","3♥","2♥","A♦","K♦","Q♦","J♦","10♦","9♦","8♦","7♦","6♦","5♦","4♦","3♦","2♦","A♣","K♣","Q♣","J♣","10♣","9♣","8♣","7♣","6♣","5♣","4♣","3♣","2♣"],n=Ee([]),r=Ee(["","","","",""]),i=Ee(""),a=Ee(!1),o=Ee([]),l=Ee(Array(e.gameConfig.players).fill(null));cs(()=>e.gameConfig.players,P=>{l.value=Array(P).fill(null)});const u=vi(()=>{const P=[];for(let T=0;T<4;T++)P.push(s.slice(T*13,(T+1)*13));return P}),d=P=>{n.value.includes(P)?n.value=n.value.filter(T=>T!==P):n.value.length<2&&n.value.push(P)},c=P=>{o.value.includes(P)?o.value=o.value.filter(T=>T!==P):o.value.length<3&&o.value.push(P),o.value.length===3&&(r.value=[...o.value,r.value[3],r.value[4]],a.value=!1,e.gameState.nextStage())},g=(P,T)=>{const{type:Z,amount:X}=T;e.gameState.updatePlayerAction(P,Z,X)},p=()=>{e.gameState.rotateSmallBlind()},b=()=>{n.value=[],r.value=["","","","",""],i.value="",a.value=!1,o.value=[],e.gameState.resetGame(),l.value.forEach(P=>{P&&typeof P.resetState=="function"&&P.resetState()})},m=()=>{p(),b()},v=()=>{const P=e.gameState.getGameState(),T={flop:r.value.slice(0,3),turn:r.value[3],river:r.value[4]};return{...P,handCards:n.value,communityCards:T}},F=async()=>{try{if(n.value.length!==2){i.value="請先選擇兩張手牌";return}i.value="正在分析...";const P=v();i.value=await Jh(P)}catch(P){console.error("獲取建議時發生錯誤:",P),i.value=P.message||"獲取建議時發生錯誤，請稍後再試"}},C=P=>["♠","♥","♦","♣"][P],M=P=>P.slice(0,-1),A=P=>P?P.split(`
`).map(T=>(T=T.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),T)).join("<br>"):"",j=P=>({preflop:"翻牌前",flop:"翻牌圈",turn:"轉牌圈",river:"河牌圈"})[P]||P,H=()=>{e.gameState.nextStage()};return(P,T)=>{var Z,X,q;return G(),Y("div",Gh,[E("div",qh,[E("div",Xh,[E("div",{class:"players-header"},[T[4]||(T[4]=E("h3",null,"玩家列表",-1)),E("div",{class:"header-buttons"},[E("button",{class:"rotate-sb-btn",onClick:p}," 輪換小盲位置 "),E("button",{class:"new-hand-btn",onClick:m}," 重新開始一局 ")])]),E("div",Qh,[(G(!0),Y(fe,null,Ne((Z=t.gameState)==null?void 0:Z.players,J=>(G(),Bn(Md,{key:J.id,name:J.name,stack:J.stack,"is-active":J.hasActed,"is-small-blind":J.position==="SB",onAction:he=>g(J.id,he)},null,8,["name","stack","is-active","is-small-blind","onAction"]))),128))])]),E("div",Yh,[E("div",zh,[T[11]||(T[11]=E("h2",null,"當前牌局狀態",-1)),E("div",Zh,[E("div",ep,[T[5]||(T[5]=E("span",{class:"label"},"底池：",-1)),E("span",tp,we((X=t.gameState)==null?void 0:X.pot)+"BB",1)]),E("div",sp,[T[6]||(T[6]=E("span",{class:"label"},"階段：",-1)),E("span",np,we(j((q=t.gameState)==null?void 0:q.currentStage)),1)])]),E("div",rp,[T[7]||(T[7]=E("label",null,"手牌：",-1)),E("div",ip,[(G(!0),Y(fe,null,Ne(u.value,(J,he)=>(G(),Y("div",{class:"cards-row",key:he},[E("div",{class:Ye(["suit-label",{red:he===1||he===2}])},we(C(he)),3),(G(!0),Y(fe,null,Ne(J,_e=>(G(),Y("button",{key:_e,class:Ye(["card-btn",{selected:n.value.includes(_e),disabled:n.value.length===2&&!n.value.includes(_e),red:he===1||he===2}]),onClick:Mt=>d(_e)},we(M(_e)),11,ap))),128))]))),128))]),n.value.length>0?(G(),Y("div",op," 已選擇："+we(n.value.join(" ")),1)):Ls("",!0)]),E("div",lp,[T[10]||(T[10]=E("label",null,"公共牌：",-1)),E("div",cp,[E("div",up,[a.value?(G(),Y("div",dp,[(G(!0),Y(fe,null,Ne(u.value,(J,he)=>(G(),Y("div",{class:"cards-row",key:he},[(G(!0),Y(fe,null,Ne(J,_e=>(G(),Y("button",{key:_e,class:Ye(["card-btn",{selected:o.value.includes(_e),disabled:o.value.length===3&&!o.value.includes(_e)}]),onClick:Mt=>c(_e)},we(_e),11,hp))),128))]))),128))])):(G(),Y("div",fp,[(G(!0),Y(fe,null,Ne(r.value.slice(0,3),(J,he)=>(G(),Y("button",{key:he,class:"community-card-btn",onClick:T[0]||(T[0]=_e=>a.value=!0)},we(J||"選擇前三張"),1))),128))]))]),E("div",pp,[Pt(E("select",{"onUpdate:modelValue":T[1]||(T[1]=J=>r.value[3]=J)},[T[8]||(T[8]=E("option",{value:""},"轉牌",-1)),(G(),Y(fe,null,Ne(s,J=>E("option",{key:J,value:J},we(J),9,mp)),64))],512),[[Dn,r.value[3]]]),Pt(E("select",{"onUpdate:modelValue":T[2]||(T[2]=J=>r.value[4]=J)},[T[9]||(T[9]=E("option",{value:""},"河牌",-1)),(G(),Y(fe,null,Ne(s,J=>E("option",{key:J,value:J},we(J),9,gp)),64))],512),[[Dn,r.value[4]]])])])])]),E("button",{class:"next-stage-btn",onClick:H}," 下一階段 "),E("button",{class:"submit-btn",onClick:F},"獲取建議"),i.value?(G(),Y("div",_p,[T[12]||(T[12]=E("h3",null,"AI 建議：",-1)),E("div",{class:"advice-content",innerHTML:A(i.value)},null,8,yp)])):Ls("",!0),E("button",{class:"reset-btn",onClick:T[3]||(T[3]=J=>P.$emit("reset-game"))},"重新設定")])])])}}},wp=Ai(bp,[["__scopeId","data-v-8de979fa"]]),vp={class:"app"},xp={__name:"App",setup(t){const e=Ee(null),s=Ee(null),n=i=>{e.value=i,s.value=new kd(i)},r=()=>{e.value=null,s.value=null};return(i,a)=>(G(),Y("div",vp,[a[0]||(a[0]=E("header",null,[E("h1",null,"德州撲克助手")],-1)),E("main",null,[e.value?(G(),Bn(wp,{key:1,"game-config":e.value,"game-state":s.value,onResetGame:r},null,8,["game-config","game-state"])):(G(),Bn(Sd,{key:0,onStartGame:n}))])]))}},Sp="modulepreload",Ap=function(t){return"/texas-hold-AI/"+t},oo={},Cp=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(s.map(l=>{if(l=Ap(l),l in oo)return;oo[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":Sp,u||(c.as="script"),c.crossOrigin="",c.href=l,o&&c.setAttribute("nonce",o),document.head.appendChild(c),u)return new Promise((g,p)=>{c.addEventListener("load",g),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function lo(t={}){const{immediate:e=!1,onNeedRefresh:s,onOfflineReady:n,onRegistered:r,onRegisteredSW:i,onRegisterError:a}=t;let o,l;const u=async(c=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(o=await Cp(async()=>{const{Workbox:c}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:c}},[]).then(({Workbox:c})=>new c("/texas-hold-AI/sw.js",{scope:"/texas-hold-AI/",type:"classic"})).catch(c=>{a==null||a(c)}),!o)return;o.addEventListener("activated",c=>{(c.isUpdate||c.isExternal)&&window.location.reload()}),o.addEventListener("installed",c=>{c.isUpdate||n==null||n()}),o.register({immediate:e}).then(c=>{i?i("/texas-hold-AI/sw.js",c):r==null||r(c)}).catch(c=>{a==null||a(c)})}}return l=d(),u}const Pp=Yf(xp);Pp.mount("#app");"serviceWorker"in navigator&&lo({onNeedRefresh(){confirm("有新版本可用，是否更新？")&&lo(!0)},onOfflineReady(){console.log("應用已準備好離線使用")}});
